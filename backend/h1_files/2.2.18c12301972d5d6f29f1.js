(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{139:function(e,t,r){var n,a;"undefined"!=typeof self&&self,e.exports=(n=r(107),a=r(82),webpackJsonpHotstarWebSDK__name_([0],[function(e,t){e.exports=n},,,,,,,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NETWORK_ERRORS=t.SLATE_ACTION_TYPE=t.PLAYBACK_CONSENT_API=t.PLAYBACK_COMPOSITE_API_IDS=t.PLAYBACK_COMPOSITE_ERROR_TYPE=t.ENTITLEMENT_V1_ERROR_TYPE=t.REFRESH_TOKEN_ERROR_TYPE=t.trayWithoutMeta=t.PAGINATION_SIZE=t.trayTypeIdMap=t.trayTypeToSourceMap=t.apiSource=t.avsSubscribedUserStatus=t.contentPagination=t.skipMinimumCardsRule=t.skipTrayCall=t.defaultIsAllowPlayBackResponse=t.defaultIdentifyTrayResponse=t.defaultTrayResponse=t.imageTypes=t.trayTypes=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(r(6)),a=r(58),u=(t.trayTypes={EDITORIAL_TRAY:"EDITORIAL",NEWS_CLIPS_TRAY:"NEWS_CLIPS",POPULAR_TRAY:"POPULAR",MATCH_HIGHLIGHTS_TRAY:"SPORT_MATCH_HIGHLIGHTS",SPORTS_LIVE_TRAY:"SPORT_LIVE",SPORT_DAY_HIGHLIGHT:"SPORT_DAY_HIGHLIGHT",SPORTS_TRAY:"SPORTS_TRAY",SPORTS_REPLAY:"SPORT_REPLAY",DAILY_POPULAR_EPISODES:"DAILY_POPULAR_EPISODES",DAILY_POPULAR_CLIPS:"DAILY_POPULAR_CLIPS",DAILY_POPULAR_SPORTS:"DAILY_POPULAR_SPORTS",DAILY_POPULAR_SPORTS_CLIPS:"DAILY_POPULAR_SPORTS_CLIPS",POPULAR_LANGUAGE_GENRE_SERIES:"POPULAR_LANGUAGE_GENRE_SERIES",POPULAR_LANGUAGE_GENRE_MOVIES:"POPULAR_LANGUAGE_GENRE_MOVIES",POPULAR_LANGUAGE_GENRE_MOVIES_SERIES:"POPULAR_LANGUAGE_GENRE_MOVIES_SERIES",LANGUAGE_BASED_SERIES:"LANGUAGE_BASED_SERIES",LANGUAGE_BASED_MOVIE:"LANGUAGE_BASED_MOVIE",MOST_RECENT_EPISODE:"MOST_RECENT_EPISODE",MOST_RECENT_CLIPS:"MOST_RECENT_CLIPS",MOST_RECENT_MOVIE:"MOST_RECENT_MOVIE",MOST_RECENT_SERIES:"MOST_RECENT_SERIES",GENRE_BASED_SPORT_LIVE:"GENRE_BASED_SPORT_LIVE",LANGUAGE_GENRE_SPORT_HIGHLIGHTS:"LANGUAGE_GENRE_SPORT_HIGHLIGHTS",IPL_SLOMO_BANNER:"IPL_SLOMO_BANNER",PREMIUM_SERIES:"PREMIUM_SERIES",PREMIUM_MOVIES:"PREMIUM_MOVIES"},t.imageTypes={IMAGE_TYPE:{NEWS_CLIPS:"hs",SPORT:"hs",SPORT_MATCH_HIGHLIGHTS:"hs",SPORT_LIVE:"hs",SPORT_YMAL:"hs",ACN_SPORT_YMAL:"hs",DEFAULT:"hs",RECENT_FROM_MATCH:"hs",POPULAR_FOR_TOURNAMENT:"hs",YMAL_TRAYS:"hs",EPISODE:"hs",SEASON:"hsea",GAME:"hs"}},t.defaultTrayResponse=(0,n.default)({},a.baseTrayModel,{isPanic:!1,success:!0,message:""}),t.defaultIdentifyTrayResponse={trays:[]},t.defaultIsAllowPlayBackResponse={canWatch:"Y",message:""},t.skipTrayCall={contentTypes:["NEWS_LIVE"]},t.skipMinimumCardsRule=["SEASON","RECENT_FROM_MATCH"],t.contentPagination={becardPageSize:8,fecardPageSize:8,betrayPageSize:5,fetrayPageSize:5},t.avsSubscribedUserStatus=["SF","SC","SR"],t.apiSource={AVS:"avs",CMS:"cms",SNIPER:"sniper",PERSONA:"persona"});t.trayTypeToSourceMap={catalog:u.CMS,px:u.CMS},t.trayTypeIdMap={CONTINUE_WATCHING:833,WATCHLIST:831,LEADERBOARD:420,PERSONA_WITH_META:851,PERSONA_WITHOUT_META:859,PERSONA_MASTHEAD:850},t.PAGINATION_SIZE=20,t.trayWithoutMeta=["catalog","px"],t.REFRESH_TOKEN_ERROR_TYPE={JWT_TOKEN_TAMPERED:"UMSP_601",USER_TOKEN_INVALIDATED:"ERR_UM_071"},t.ENTITLEMENT_V1_ERROR_TYPE={GEO:"GEO",CONCURRENCY:"CONCURRENCY",MAX_LIMIT_REACHED:"ERR_CON_041",USER_TOKEN_INVALIDATED:"ERR_CON_040",SUSPICIOUS_ACTIVITY:"ERR_CON_042",JWT_TOKEN_EXPIRED:"ERR_CON_043",JWT_TOKEN_TAMPERED:"ERR_CON_044",MALICIOUS_ACCESS_TO_PAID_CONTENT:"ERR_CON_047"},t.PLAYBACK_COMPOSITE_ERROR_TYPE={BAD_PLAYBACK_REQUEST:"ERR_PB_1401",USER_NOT_LOGGED_IN:"ERR_PB_1405",JWT_TOKEN_EXPIRED:"ERR_PB_1408",JWT_TOKEN_TAMPERED:"ERR_PB_1409",INVALID_CONTENT:"ERR_PB_1410",INSUFFICIENT_USER_PACK:"ERR_PB_1411",INACCESIBLE_CONTENT:"ERR_PB_1412",PLAYBACK_FETCH_ERROR:"ERR_PB_1413",TOO_MANY_REQUESTS:"ERR_PB_1414",PLAYBACK_LIMIT_REACHED:"ERR_PB_1420",USER_CONSENT_REQUIRED:"ERR_PB_1419",PB_FORCE_LOGOUT:"ERR_PB_1422",PARENTAL_CONTROL:"ERR_PB_1423",LOGIN_NUDGE:"ERR_PB_1424",USER_NOT_ENTITLED:"ERR_PB_1425"},t.PLAYBACK_COMPOSITE_API_IDS={PLAYBACK_COMPOSITE:"playback-composite",WATCH_PERCENTAGE:"WATCH-PERCENTAGE",GEO_RIGHTS:"geoLocation",CONCURRENCY:"CONCURRENCY"},t.PLAYBACK_CONSENT_API="playback-consent",t.SLATE_ACTION_TYPE={GEO:"GEO",CONCURRENCY:"CONCURRENCY",LOG_IN:"LOGIN",PREMIUM:"PREMIUM",UPGRADE:"UPGRADE",NETWORK_UNAVAILABLE:"NETWORK_UNAVAILABLE",BLANK:"BLANK",PLAYER_ERROR:"PLAYER_ERROR",ACC_LOGGED_OUT:"ACC_LOGGED_OUT",USER_CONSENT:"USER_CONSENT",PLAYBACK_LIMIT_REACHED:"PLAYBACK_LIMIT_REACHED"},t.NETWORK_ERRORS={NETWORK_UNAVAILABLE:"NET_UNAVBL",NETWORK_TIMEOUT:"NET_TMO"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=n(r(76)),u=n(r(79));t.default=function(){function e(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=(0,u.default)(e);!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if((0,a.default)(Object(t)))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},,,,,,,,function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t){var r={};for(var n in e)0>t.indexOf(n)&&Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trayAssetsModel=t.trayPages=t.baseTrayModel=void 0;var n=r(0).utils.baseUtils,a={assets:{items:[],nextOffsetURL:"",page:0,pageSize:0,totalPages:0,totalResults:0},title:"",engTitle:""},u={page:0,pageSize:0,totalPages:0,totalResults:0},o={meta:{duration:""},assetType:"VIDEO",detailApiURI:"",image:{imageType:0,path:""}};t.baseTrayModel=a=n.getNewObjectCopy(a),t.trayPages=u=n.getNewObjectCopy(u),t.trayAssetsModel=o=n.getNewObjectCopy(o),t.baseTrayModel=a,t.trayPages=u,t.trayAssetsModel=o},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r,n,a){var u=n;switch(e){case"EPISODE":case"SEASON":case"SERIES":case"SHOW_LIVE":case"NEWS_LIVE":u=t;break;case"SPORT":case"SPORT_LIVE":case"SPORT_MATCH_HIGHLIGHTS":case"SPORT_DAY_HIGHLIGHTS":case"SPORT_REPLAY":u=r;break;case"CLIPS":case"NEWS_CLIPS":case"NEWS_BREAKING":u=a;break;default:u=n}return u}function u(e){var t=e.replace("http://media","https://secure-media");return(t=t.replace("-starag.startv.in",".hotstar.com")).trim()}function o(e){return e?"long_form":"short_form"}function i(e,t){return t.replace("[ID_MOD_100]",(""+e).slice(-2)).replace("[ID]",""+e)}function s(e){return e.indexOf("EPISODE")>-1?"EPISODE":e.indexOf("SPORT")>-1?"SPORT":e.indexOf("NEWS")>-1?"NEWS":e.indexOf("MOVIE")>-1?"MOVIE":e.indexOf("TV")>-1?"SERIES":"CLIPS"}function c(e){return e&&e.indexOf("LIVE")>-1}function l(e){return e===T}function d(e){e.castDisabled=!e.castEnabled;var t="";return(0,b.default)(I).forEach((function(r){e[r]&&(t=t+I[r]+";")})),t.slice(0,-1)}function f(e,t){var r="";if(""!==e&&t&&t.length&&t.length>0)for(var n=0;t.length>n;n++){var a=t[n];if(e===a.categoryId){r=a.categoryName;break}}return r}function p(e){var t={},r=e.type,n=e.contentTitle,a=e.title,u=e.showName,o=e.secondaryTitle,i=void 0===o?"":o;return t.primaryTitle=n,t.secondaryTitle="",r.indexOf("CLIP")>-1?t.secondaryTitle=i:r.indexOf("EPISODE")>-1&&(t.primaryTitle=u,t.secondaryTitle=a),t}function v(e,t,r,n,u){var i=t.contentType,s=void 0===i?"":i,c=t.showId,l=void 0===c?0:c,d=t.seasonId,f=void 0===d?0:d,p=t.categoryId,v=a(s,l,f,void 0===p?"":p,u),h={},y=e.cuepointsMidroll;return r&&(y=""),y||(h={cuepointsMidroll:""}),(0,_.default)({},e,{vpcategory:v,cf:o(n)||"NOT_FOUND"},h)}function h(e){var t=e.item,r=void 0===t?{}:t,n=e.variantsList,a=void 0===n?[]:n,u={};return u.pcExtendedRatings=d(r),u.variantlist=a,u.legacy_details=r,u}function y(e){return!(!e.premium&&!e.live)}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:";";if("object"!==(void 0===e?"undefined":(0,m.default)(e))||!(0,b.default)(e).length)return"";var r=(0,b.default)(e).sort(),n=[];return r.forEach((function(t){n.push(t+":"+e[t])})),n.join(t)}Object.defineProperty(t,"__esModule",{value:!0});var m=n(r(49)),_=n(r(20)),b=n(r(23));t.getCid=a,t.getChannelRegionUrl=u,t.getCfParamVpz=o,t.getCuePointUrl=i,t.getContentType=s,t.isLive=c,t.isAdult=l,t.getPcExtendedRating=d,t.getTournamentName=f,t.getLabelsForMetaData=p,t.getAdMetaData=v,t.getMetaDataOfWatchPage=h,t.isContentSubscribed=y,t.generateTagsString=g;var T=3,I={disney:"A",fox:"H",castDisabled:"D",hboContent:"H",supportSimulcast:"T",premium:"S"};t.default={getCfParamVpz:o,getChannelRegionUrl:u,getCid:a,getCuePointUrl:i,getTournamentName:f,isAdult:l,isContentSubscribed:y,getMetaDataOfWatchPage:h,getContentType:s,getPcExtendedRating:d,isLive:c,getAdMetaData:v,getLabelsForMetaData:p}},function(e,t){e.exports=a},,,,,,,,,,,,,,,,function(e,t,r){e.exports={default:r(77),__esModule:!0}},function(e,t,r){r(33),r(25),e.exports=r(78)},function(e,t,r){var n=r(44),a=r(13)("iterator"),u=r(31);e.exports=r(9).isIterable=function(e){var t=Object(e);return void 0!==t[a]||"@@iterator"in t||u.hasOwnProperty(n(t))}},function(e,t,r){e.exports={default:r(80),__esModule:!0}},function(e,t,r){r(33),r(25),e.exports=r(81)},function(e,t,r){var n=r(22),a=r(55);e.exports=r(9).getIterator=function(e){var t=a(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},,,,,function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.HotstarAVSCommonsService=void 0;var a=n(r(7)),u=n(r(8)),o=n(r(10)),i=n(r(1)),s=n(r(2)),c=r(0),l=t.HotstarAVSCommonsService=function(){function e(){(0,i.default)(this,e)}return(0,s.default)(e,[{key:"getCuePoints",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,o.default)(a.default.mark((function e(t){var r,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,c.HttpLib.get(t,{type:"xml"});case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),r.isError=!0;case 10:return n="",r.isError||(n=r.text),e.abrupt("return",u.default.resolve(n));case 13:case"end":return e.stop()}}),e,this,[[1,7]])})));return e}()}]),e}();t.default=(0,c.registerOperations)("AVS",l)},function(e,t,r){e.exports={default:r(88),__esModule:!0}},function(e,t,r){r(89),e.exports=r(9).Object.freeze},function(e,t,r){var n=r(17),a=r(50).onFreeze;r(47)("freeze",(function(e){return function(t){return e&&n(t)?e(a(t)):t}}))},,,function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r,n,a){var u={};return Object.keys(n).forEach((function(e){u[e]=n[e]})),u.enumerable=!!u.enumerable,u.configurable=!!u.configurable,("value"in u||u.initializer)&&(u.writable=!0),u=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),u),a&&void 0!==u.initializer&&(u.value=u.initializer?u.initializer.call(a):void 0,u.initializer=void 0),void 0===u.initializer&&(Object.defineProperty(e,t,u),u=null),u}Object.defineProperty(t,"__esModule",{value:!0});var u,o,i,s,c,l,d,f,p,v,h,y,g=n(r(15)),m=n(r(115)),_=n(r(11)),b=n(r(119)),T=n(r(20)),I=n(r(23)),E=n(r(6)),R=n(r(233)),C=n(r(8)),O=n(r(48)),P=n(r(7)),S=n(r(10)),k=n(r(1)),w=n(r(2)),A=r(0),x=n(r(120)),M=n(r(121)),D=n(r(34)),N=n(r(51)),L=n(r(238)),U=r(239),W=n(r(122)),q=r(16),j=r(123),H=r(113),V=new x.default,G=new D.default,Y=new N.default,F=new L.default,B=A.utils.baseUtils;t.default=(u=(0,A.responseAdapter)(F.getContinueWatchingTrayResponse),o=(0,A.responseAdapter)(F.fetchCWTrayResponse),i=(0,A.requestAdapter)(F.removeCWItemRequest),s=(0,A.responseAdapter)(F.fetchLocalCWTrayResponse),c=(0,A.requestAdapter)(F.updateLocalCWDataRequest),l=(0,A.responseAdapter)(F.getContentDetailsResponse),d=(0,A.requestAdapter)(F.updateCWTrayItemRequest),f=(0,A.responseAdapter)(F.getLpvHeaderResponse),p=(0,A.responseAdapter)(F.getWatchNextResponse),v=(0,A.responseAdapter)(F.fetchPersonaTrayResponse),h=(0,A.responseAdapter)(F.getWatchlistResponse),y=function(){function e(){(0,k.default)(this,e),this.calculateWatchPercentage=function(e,t){return Math.floor(e*t/100)},this.shouldDisplayTag=function(e){return.05>e},this.apiRegistry=M.default}return(0,w.default)(e,[{key:"rucSetModule",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,S.default)(P.default.mark((function e(t){var r=t.reqModule,n=void 0===r?"":r,a=t.reqData,u=void 0===a?{}:a;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.LocalStorageInterface.rucSetModule({reqModule:n,reqData:u}));case 1:case"end":return e.stop()}}),e,this)})));return e}()},{key:"rucSetItem",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,S.default)(P.default.mark((function e(t){var r=t.reqModule,n=void 0===r?"":r,a=t.reqKey,u=void 0===a?"":a,o=t.reqData,i=void 0===o?{}:o;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.LocalStorageInterface.rucSetItem({reqModule:n,reqKey:u,reqData:i}));case 1:case"end":return e.stop()}}),e,this)})));return e}()},{key:"rucGetItem",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,S.default)(P.default.mark((function e(t){var r=t.reqModule,n=void 0===r?"":r,a=t.reqKey,u=void 0===a?"":a;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.LocalStorageInterface.rucGetItem({reqModule:n,reqKey:u}));case 1:case"end":return e.stop()}}),e,this)})));return e}()},{key:"rucChkIfValid",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,S.default)(P.default.mark((function e(t){return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e,this)})));return e}()},{key:"rucRemoveItem",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,S.default)(P.default.mark((function e(t){var r=t.reqModule,n=void 0===r?"":r,a=t.reqKey,u=void 0===a?"":a;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.LocalStorageInterface.rucRemoveItem({reqModule:n,reqKey:u}));case 1:case"end":return e.stop()}}),e,this)})));return e}()},{key:"rucClearAll",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,S.default)(P.default.mark((function e(t){return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e,this)})));return e}()},{key:"rucSyncServer",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,S.default)(P.default.mark((function e(t){return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e,this)})));return e}()},{key:"fetchCwWithLocalBackup",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,S.default)(P.default.mark((function e(t){var r,n,a,u,o,i,s,c,l;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.config,n=this.fetchCWTray(t),a=this.fetchLocalCWTray(t),u=[n],r.skipCache||u.push(a),e.next=7,C.default.all(u);case 7:return o=e.sent,i=(0,O.default)(o,2),s=i[0],c=i[1],l=void 0===c?[]:c,e.abrupt("return",{apiCWTray:s,localCWTray:l});case 13:case"end":return e.stop()}}),e,this)})));return e}()},{key:"getContinueWatchingTray",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,S.default)(P.default.mark((function e(t){var r,n,a,u,o,i,s,c,l,d,f,p,v,h,y,g,m;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.config,n=void 0===r?{}:r,a=t.userId,u=t.offset,a&&A.canUseDOM){e.next=4;break}return console.error("Invalid scenario to call CW from persona: canUseDOM: "+A.canUseDOM+", userId: "+a,t),e.abrupt("return",{data:[],offset:u});case 4:return e.next=6,this.fetchCwWithLocalBackup(t);case 6:return o=e.sent,i=o.apiCWTray,s=o.localCWTray,c=i.data.token,s=this._filterOutStaleData(s,i),l=(l=this.mergeCWTrayData(s,i.data.items)).sort(this._sortDescCWData),d=l.map(this._getContentIds),f=(0,R.default)(l.reduce(this._getShowContentIds,{})),p=this.getContentDetails({contentIds:d,config:n}),v=this.getContentDetails({contentIds:f,config:n}),e.next=19,C.default.all([p,v]);case 19:if(h=e.sent,y=(0,O.default)(h,2),g=y[0],m=y[1],l=this._addContentMeta(g,l),l=this._getUniqueItemPerShow(l),l=this._addShowPoster(m,l),n.skipCache){e.next=29;break}return e.next=29,this.updateLocalCWData({userId:a,cwTray:this._getParsedLocalTray(l)});case 29:return e.abrupt("return",{data:l,offset:u,token:c});case 30:case"end":return e.stop()}}),e,this)})));return e}()},{key:"_addContentMeta",value:function(e,t){return t.filter((function(t){return!!e[t.item_id]})).map((function(t){var r=t.watched,n=t.tag,a=t.timestamp,u=t.showContentId,o=100*r,i=e[t.item_id];return i.meta=(0,E.default)({},i.meta||{},{percentage:o}),(0,E.default)({},i,{percentage:o,showContentId:u,isCWItem:!0,isNextEpisode:"NEXT_EPISODE"===n,isNewEpisode:"NEW_EPISODE"===n,tag:n,timestamp:a})}))}},{key:"_getUniqueItemPerShow",value:function(e){var t={};return e.filter((function(e){var r=e.showContentId;return!r||!t[r]&&(t[r]=e.contentId,!0)}))}},{key:"_addShowPoster",value:function(e,t){return t.map((function(t){var r=t.showContentId;if(!r)return t;var n=e[r];return n?(t.imgContentId=r,t.image=Y.extractImageData(n),t.showDetail=n,t):t}))}},{key:"_getParsedLocalTray",value:function(e){return e.map((function(e){return{item_id:e.contentId,watched:e.percentage/100,showContentId:e.showContentId,tag:e.tag,timestamp:e.timestamp}}))}},{key:"_sortDescCWData",value:function(e,t){return t.timestamp-e.timestamp}},{key:"_getContentIds",value:function(e){return e.item_id}},{key:"_getShowContentIds",value:function(e,t){var r=t.showContentId;return r&&(e[r]=r),e}},{key:"_filterOutStaleData",value:function(e,t){if(!t.data.updatedAt)return e;var r={};return(0,R.default)(e).forEach((function(e){e.timestamp>t.data.updatedAt&&(r[e.item_id]=e)})),r}},{key:"fetchCWTrayWithLocalBackup",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,S.default)(P.default.mark((function e(t){var r,n,a,u,o;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchCwWithLocalBackup(t);case 2:return r=e.sent,n=r.apiCWTray,a=r.localCWTray,u=this._normalizeLocalCwTrayData(a,t),o=this._mergeCwData(n,u,t),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e,this)})));return e}()},{key:"_normalizeLocalCwTrayData",value:function(){var e=arguments[1],t={data:{},status:!0},r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={orderedContentIds:(0,I.default)(r),items:r};return t.data=(0,T.default)({},n,{reqContentIds:e.contentIds,reqShowContentId:e.showContentId}),t}},{key:"_mergeCwData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e;try{(n=JSON.parse((0,b.default)(e))).data=n.data||{},n.data.items={},n.data.orderedContentIds=[];var a=n.data||{},u=a.items,o=void 0===u?{}:u,i=a.orderedContentIds,s=void 0===i?[]:i,c=r.contentIds,l=void 0===c?[]:c,d=r.showContentId,f=e.data||{},p=f.items,v=void 0===p?{}:p,h=f.orderedContentIds,y=void 0===h?[]:h,g=t.data||{},T=g.items,I=void 0===T?{}:T,E=g.orderedContentIds,R=void 0===E?[]:E,C=!!d,O=[].concat((0,_.default)(new m.default([].concat((0,_.default)(y),(0,_.default)(R))))),P=-1/0,S=C&&O.reduce((function(e,t){var r=v[t]||I[t]||{},n=r.timestamp||0;if(r.showContentId!==d)return e;var a=n>P;return a&&(P=n),a?t:e}),void 0);O.forEach((function(e){var t=!!v[e],r=I[e]||{},n=v[e]||{},a=(t&&n.timestamp>r.timestamp?n:r)||{},u=l.includes(e)||r.showContentId===d;(C&&e===S||!C&&u)&&(s.push(e),o[e]=a)}))}catch(e){}return n}},{key:"fetchCWTray",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,S.default)(P.default.mark((function e(t){var r;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,U.NetworkInterface.fetchCwTray(t);case 4:r=e.sent,r=JSON.parse((0,b.default)(r)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("fetchCWTray error",e.t0);case 11:return e.abrupt("return",{request:t,response:r});case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));return e}()},{key:"fetchCWMovieProgress",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,S.default)(P.default.mark((function e(t){var r,n,a,u,o,i,s;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.contentId,n=t.params,a=null,e.prev=2,e.next=5,this.fetchCWTray((0,E.default)({contentIds:[r]},n));case 5:u=e.sent,o=u.data.items,(i=(void 0===o?{}:o)[r])&&(s=100*i.watched||0,(0,H.isCWInWatchingState)(s)&&(a=s)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error("Error while fetching Movie Percentage",e.t0);case 14:return e.abrupt("return",{contentId:r,progress:a});case 15:case"end":return e.stop()}}),e,this,[[2,11]])})));return e}()},{key:"fetchCWShowProgress",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,S.default)(P.default.mark((function e(t){var r,n,a,u,o;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,e.prev=1,e.next=4,this.fetchCWTray(t);case 4:if(r=e.sent,n=r.data.orderedContentIds,(a=void 0===n?[]:n).length){e.next=8;break}return e.abrupt("return",r);case 8:return u={contentIds:a.slice(0,1),config:{}},e.next=11,G.getMultiGetContent(u);case 11:o=e.sent,r.data.multiget=o,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.error("Error while fetching CW show progress",e.t0);case 18:return e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,this,[[1,15]])})));return e}()},{key:"removeCWItem",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,S.default)(P.default.mark((function e(t){var r,n,a,u,o,i,s,c,l,d;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},t){e.next=3;break}return e.abrupt("return",r);case 3:return n=t.userId,a=t.contentIds,u=t.config,o=void 0===u?{}:u,i=t.userToken,e.prev=4,s=(0,E.default)({},V._getRequestHeaders((0,E.default)({},o,{userToken:i})),W.default.getLpvAndSubsStatusObj(n,o)),c={headers:s,data:{items:a}},o.PERSONA_API_TIMEOUT&&(c.apiTimeOut=o.PERSONA_API_TIMEOUT),l={pathVars:{userId:n}},d=this.apiRegistry.getPath(l,"continueWatchingTray"),e.next=12,A.HttpLib.delete(d,c);case 12:r=e.sent,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.error("Failed to remove an item from cw",e.t0);case 18:return e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,this,[[4,15]])})));return e}()},{key:"fetchLocalCWTray",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,S.default)(P.default.mark((function e(t){var r,n,a,u;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.userId,n=t.contentIds,a=void 0===n?[]:n,u={},e.prev=2,e.next=5,this.rucGetItem({reqModule:"persona-cw",reqKey:r});case 5:if(e.t0=e.sent){e.next=8;break}e.t0={};case 8:(u=e.t0)&&u.timestamp&&delete u.timestamp,a.length&&(u=B.pick(u,a)),e.next=16;break;case 13:e.prev=13,e.t1=e.catch(2),console.error("Error while fetching local CW tray",e.t1);case 16:return e.abrupt("return",u);case 17:case"end":return e.stop()}}),e,this,[[2,13]])})));return e}()},{key:"getWatchPercentage",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,S.default)(P.default.mark((function e(t){var r,n,a,u,o,i,s,c,l,d,f,p,v,h,y,g;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=0,n=t.personaData,a=void 0===n?{}:n,u=t.content,o=t.userId,i=u.contentId,s=u.duration,!a.config){e.next=14;break}return e.next=6,this.fetchCwWithLocalBackup((0,E.default)({},a,{userToken:o}));case 6:c=e.sent,l=c.apiCWTray,d=c.localCWTray,f=this.mergeCWTrayData(d,l.data.items),p=f.filter((function(e){return e.item_id===i})),v=(0,O.default)(p,1),h=v[0],r=(void 0===h?{}:h).watched||0,e.next=19;break;case 14:return y={reqModule:"content-bookmark",reqKey:i},e.next=17,this.rucGetItem(y,"RUC");case 17:(g=e.sent)&&g.lastWatchedTime&&(r=g.lastWatchedTime/s);case 19:return r=100*r||0,e.abrupt("return",r);case 21:case"end":return e.stop()}}),e,this)})));return e}()},{key:"mergeCWTrayData",value:function(e,t){var r=this,n=B.getNewObjectCopy(t);return(0,I.default)(e).forEach((function(a){var u=e[a],o=t[a]||{timestamp:-1};if(u.timestamp>o.timestamp){if(u=B.getNewObjectCopy(u),o.item_id){var i="";r.shouldDisplayTag(u.watched)&&(i=o.tag),u=(0,E.default)({},o,{watched:u.watched,timestamp:u.timestamp,tag:i})}n[a]=u}})),(0,R.default)(n)}},{key:"updateLocalCWData",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,S.default)(P.default.mark((function e(t){var r,n,a;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return console.error("Invalid request to update CW data. Request : "+t),e.abrupt("return",!1);case 3:return r=t.userId,n=t.cwTray,a=!1,e.prev=5,e.next=8,this.rucSetItem({reqModule:"persona-cw",reqKey:r,reqData:n});case 8:a=!!e.sent,e.next=13;break;case 11:e.prev=11,e.t0=e.catch(5);case 13:return a||console.error("Failed to update CW data. User: "+r+" Data: "+n),e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,this,[[5,11]])})));return e}()},{key:"getContentDetails",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,S.default)(P.default.mark((function e(t){var r,n,a=t.contentIds,u=t.config,o=t.useCategoryApi;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},a.length){e.next=3;break}return e.abrupt("return",r);case 3:return e.prev=3,n={contentIds:a,config:u,useCategoryApi:o},e.next=7,G.getMultiGetContent(n);case 7:return r=e.sent,e.abrupt("return",r);case 11:return e.prev=11,e.t0=e.catch(3),e.abrupt("return",C.default.reject(e.t0));case 14:case"end":return e.stop()}}),e,this,[[3,11]])})));return e}()},{key:"updateCWTrayItem",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,S.default)(P.default.mark((function e(t){var r,n,a,u,o,i,s,c,l,d;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return console.error("Invalid request: updateCWTrayItem params: "+t),e.abrupt("return",!1);case 3:if(r=t.contentId,n=t.percentage,a=t.userId,u=t.showContentId,o=t.contentType,i=void 0===o?"":o,s=t.removed,c=void 0!==s&&s,i=i.toLowerCase(),!(0,H.isCWInNotStartedState)(n)){e.next=7;break}return e.abrupt("return",{contentId:r,cwState:H.CWState.NOT_STARTED});case 7:return e.next=9,this.fetchLocalCWTray({userId:a});case 9:return l=e.sent,d=(0,E.default)({item_id:r,watched:n/100,timestamp:Date.now()},c&&{removed:c}),"episode"===i&&u&&(d.showContentId=u,l=this._removeShowData(l,u)),(0,H.isCWInWatchingState)(n)?l[r]=d:delete l[r],e.next=15,this.updateLocalCWData({userId:a,cwTray:(0,R.default)(l)});case 15:return e.abrupt("return",{contentId:r,cwState:(0,H.getCWState)(n)});case 16:case"end":return e.stop()}}),e,this)})));return e}()},{key:"_removeShowData",value:function(e,t){t+="";var r={};return(0,R.default)(e).forEach((function(e){e.showContentId+""!==t&&(r[e.item_id]=e)})),r}},{key:"cleanLocalCWData",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,S.default)(P.default.mark((function e(t){var r,n;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return console.error("Inavalid request: cleanLocalCWData params: "+t),e.abrupt("return",!1);case 3:return e.next=5,this.rucGetItem({reqModule:"persona-cw"});case 5:if(e.t0=e.sent){e.next=8;break}e.t0={};case 8:return r=e.t0,n=r[t]||{},e.next=12,this.rucRemoveItem({reqModule:"persona-cw"});case 12:return e.next=14,this.rucSetItem({reqModule:"persona-cw",reqKey:t,reqData:n});case 14:return e.abrupt("return",!!e.sent);case 15:case"end":return e.stop()}}),e,this)})));return e}()},{key:"fetchLpv",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,S.default)(P.default.mark((function e(t){var r,n,a,u;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.userId,n=t.config,a=void 0===n?{}:n,r){e.next=3;break}return e.abrupt("return",{});case 3:return e.next=5,U.NetworkInterface.fetchLpv(t);case 5:return(u=e.sent).status&&!a.skipCache&&U.LocalStorageInterface.setLpv({userId:r,lpvData:u.data}),e.abrupt("return",u);case 8:case"end":return e.stop()}}),e,this)})));return e}()},{key:"postLpv",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,S.default)(P.default.mark((function e(t){var r,n,a,u,o,i,s,c,l,d,f,p;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.userId,n=t.config,a=void 0===n?{}:n,u=t.data,o=void 0===u?{}:u,i={},s={},r){e.next=5;break}return e.abrupt("return",s);case 5:return e.prev=5,c="json",l=V.getAuthToken(),d={hotstarauth:l},f={pathVars:{userId:r}},p=this.apiRegistry.getPath(f,"postLpv"),a.PERSONA_API_TIMEOUT&&(i.apiTimeOut=a.PERSONA_API_TIMEOUT),i={type:c,data:o,headers:d,expireAt:-1},e.next=15,A.HttpLib.post(p,i);case 15:s=e.sent,e.next=22;break;case 18:e.prev=18,e.t0=e.catch(5),console.warn("Error while fetching LPV",e.t0),s=C.default.reject(e.t0);case 22:return e.abrupt("return",s);case 23:case"end":return e.stop()}}),e,this,[[5,18]])})));return e}()},{key:"getLpvHeader",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,S.default)(P.default.mark((function e(t){var r,n,a,u;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.userId,n=t.config,a=void 0===n?{}:n,r){e.next=3;break}return e.abrupt("return",{});case 3:if(u={},a.skipCache){e.next=8;break}return e.next=7,U.LocalStorageInterface.getLpv({userId:r});case 7:u=e.sent;case 8:if(u&&u.lpv_bucketed){e.next=12;break}return e.next=11,this.fetchLpv(t);case 11:u=e.sent;case 12:return e.abrupt("return",u.lpv_bucketed||{});case 13:case"end":return e.stop()}}),e,this)})));return e}()},{key:"getWatchNext",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,S.default)(P.default.mark((function e(t){var r,n,a,u,o,i;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0,e.prev=1,n=t.config,a=void 0===n?{}:n,e.next=5,U.NetworkInterface.fetchWatchNext(t);case 5:if(r=e.sent,(u=r.data.items||[]).length&&u[0]){e.next=9;break}throw Error("Unable get the next video");case 9:return e.next=11,this.getContentDetails({contentIds:u,config:a});case 11:if(o=e.sent,W.default.hasContentDetails(r,o)){e.next=15;break}throw Error("Multiget lookup failed");case 15:return r=(0,T.default)({},r,{multiContentMap:o}),e.abrupt("return",r);case 19:return e.prev=19,e.t0=e.catch(1),i=(0,E.default)({},r,{status:!1,error:e.t0}),e.abrupt("return",C.default.reject(i));case 23:case"end":return e.stop()}}),e,this,[[1,19]])})));return e}()},{key:"fetchPersonaTray",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,S.default)(P.default.mark((function e(t){var r,n,a,u;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,n=t.trayTypeId,a=t.config,u=void 0===a?{}:a,e.next=5,U.NetworkInterface.fetchPersonaTrayData(t,t.addIdentifier);case 5:if(r=e.sent,(0,I.default)(r).length){e.next=8;break}throw Error("fetchPersonaTray: Page end reached");case 8:e.t0=n,e.next=e.t0===q.trayTypeIdMap.PERSONA_WITH_META||e.t0===q.trayTypeIdMap.PERSONA_MASTHEAD?11:e.t0===q.trayTypeIdMap.PERSONA_WITHOUT_META?12:17;break;case 11:return e.abrupt("break",17);case 12:return r.data.itemids=r.data.items,e.next=15,this.getContentDetails({contentIds:r.data.itemids,config:u});case 15:return r.data.items=e.sent,e.abrupt("break",17);case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(1),r={};case 22:return e.abrupt("return",{request:t,resp:r});case 23:case"end":return e.stop()}}),e,this,[[1,19]])})));return e}()},{key:"getWatchlist",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,S.default)(P.default.mark((function e(t){var r;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,U.NetworkInterface.fetchWatchlist(t);case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),r={status:!1};case 10:return e.abrupt("return",{request:t,response:r});case 11:case"end":return e.stop()}}),e,this,[[1,7]])})));return e}()},{key:"addToWatchlist",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,S.default)(P.default.mark((function e(t){var r;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,e.prev=1,e.next=4,U.NetworkInterface.watchlistItemOperation(t,j.WL_OPERATIONS.ADD);case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("addToWatchlist error",e.t0);case 10:return e.abrupt("return",{status:r&&r.status,content:t});case 11:case"end":return e.stop()}}),e,this,[[1,7]])})));return e}()},{key:"removeFromWatchlist",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,S.default)(P.default.mark((function e(t){var r;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,e.prev=1,e.next=4,U.NetworkInterface.watchlistItemOperation(t,j.WL_OPERATIONS.DELETE);case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("removeFromWatchlist error",e.t0);case 10:return e.abrupt("return",{status:r&&200===r.status,content:t});case 11:case"end":return e.stop()}}),e,this,[[1,7]])})));return e}()}]),e}(),a(y.prototype,"getContinueWatchingTray",[u],(0,g.default)(y.prototype,"getContinueWatchingTray"),y.prototype),a(y.prototype,"fetchCWTray",[o],(0,g.default)(y.prototype,"fetchCWTray"),y.prototype),a(y.prototype,"removeCWItem",[i],(0,g.default)(y.prototype,"removeCWItem"),y.prototype),a(y.prototype,"fetchLocalCWTray",[s],(0,g.default)(y.prototype,"fetchLocalCWTray"),y.prototype),a(y.prototype,"updateLocalCWData",[c],(0,g.default)(y.prototype,"updateLocalCWData"),y.prototype),a(y.prototype,"getContentDetails",[l],(0,g.default)(y.prototype,"getContentDetails"),y.prototype),a(y.prototype,"updateCWTrayItem",[d],(0,g.default)(y.prototype,"updateCWTrayItem"),y.prototype),a(y.prototype,"getLpvHeader",[f],(0,g.default)(y.prototype,"getLpvHeader"),y.prototype),a(y.prototype,"getWatchNext",[p],(0,g.default)(y.prototype,"getWatchNext"),y.prototype),a(y.prototype,"fetchPersonaTray",[v],(0,g.default)(y.prototype,"fetchPersonaTray"),y.prototype),a(y.prototype,"getWatchlist",[h],(0,g.default)(y.prototype,"getWatchlist"),y.prototype),y)},,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";function n(e){try{return i.imageTypes.IMAGE_TYPE[e.contentType]||"hs"}catch(e){return"hs"}}function a(e){var t=e.traySource,r=void 0===t?"":t,n=e.trayTypeId,a=s.indexOf(n)>-1;return"third_party"===r.toLowerCase()&&!a}function u(e){var t=e.traySource,r=e.trayTypeId,n=i.trayTypeIdMap.CONTINUE_WATCHING,a=i.trayTypeIdMap.WATCHLIST,u=i.trayTypeIdMap.PERSONA_WITHOUT_META,o=i.trayTypeIdMap.PERSONA_WITH_META,s=i.trayTypeIdMap.PERSONA_MASTHEAD,c=t?t.toLowerCase():"catalog";return r===n?"cape":r===a||e.trayTypeId===u||e.trayTypeId===o||e.trayTypeId===s?"persona":c}function o(e){return a(e)||"gravity"===u(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getImageType=n,t.getTrayType=u,t.isNonRenderableTray=o;var i=r(16),s=[402,51]},function(e,t,r){"use strict";function n(e){return e>=c.LOWER&&c.UPPER>e}function a(e){return e>=c.UPPER}function u(e){return c.LOWER>e}function o(e){return n(e)?s.WATCHING:u(e)?s.NOT_STARTED:s.WATCHED}Object.defineProperty(t,"__esModule",{value:!0}),t.CWWatchingStateLimits=t.CWState=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(r(87));t.isCWInWatchingState=n,t.isCWInWatchedState=a,t.isCWInNotStartedState=u,t.getCWState=o;var s=t.CWState=(0,i.default)({NOT_STARTED:"NOT_STARTED",WATCHED:"WATCHED",WATCHING:"WATCHING"}),c=t.CWWatchingStateLimits=(0,i.default)({UPPER:95,LOWER:5})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(23)),u=n(r(20)),o=n(r(3)),i=n(r(1)),s=n(r(2)),c=n(r(4)),l=n(r(5)),d=n(r(48)),f=n(r(6)),p=n(r(56)),v=n(r(115)),h=n(r(51)),y=n(r(117)),g=n(r(228)),m=r(229),_=r(0),b=r(59),T=r(16),I=new _.HttpStatusMessages({}),E=_.utils.baseUtils,R=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).hide;return!(void 0!==e&&e)},C=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).iso3code;return void 0===e?"":e},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.langObjs,r=void 0===t?[]:t,n=e.features,a=void 0===n?[]:n,u=new v.default(r.filter(R).map(C)),o=function(){return u.has((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).iso3code)};return a.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.languages,r=void 0===t?[]:t,n=(0,p.default)(e,["languages"]);return(0,f.default)({languages:r.filter(R).filter(o)},n)}))},P=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).langObjs;e=void 0===e?[]:e;var t=(0,d.default)(e,1)[0],r=(t=void 0===t?{}:t).name;return void 0===r?"":r};t.default=function(e){function t(){var e,r,n,s;(0,i.default)(this,t);for(var l=arguments.length,d=Array(l),p=0;l>p;p++)d[p]=arguments[p];return r=n=(0,c.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(d))),n.getMovieDataResponse=function(e){return n.getContentDetailsResponse(e)},n.getEpisodeDataResponse=function(e){return n.getContentDetailsResponse(e)},n.getShowDataResponse=function(e){return n.getContentDetailsResponse(e)},n.getClipDataResponse=function(e){return n.getContentDetailsResponse(e)},n.getMatchDataResponse=function(e){return n.getContentDetailsResponse(e)},n.getTraysRequest=function(e){return e},n.getTraysResponse=function(e){var t={};try{t.items=e.traysResp,t.request=e.traysReq,t.allTraysFetched=e.allTraysFetched}catch(e){t.items=[],t.request={},t.allTraysFetched=!0}return t},n.getContentDetailsResponse=function(e){try{if(!e||e.isError)return e;var t=e.contentStartPointSeconds,r=e.clipType,o=e.config,i=e.contentDetails,s=void 0===i?{}:i,c=e.videoPlazaSettings,l=e.reqParams,d=e.isLiveMatch,p=e.originalReq,v=n.isSuccessResponse(s),h=I.getMessage("getContentDetails",s.errorDescription),y=o.DEFAULT_CLIP_CATEGORYID,m=l.context,_=l.isSubscribed,R=l.isPremiumUser,C=s.results,S=void 0===C?{}:C,k=S||{},w=k&&k.item;if(!k)return{assetType:"",content:(0,u.default)({},g.default),success:v,message:h};var A={},x=n.setMetaForAsset(w).contentType||"";E.isUndefined(m)&&(m="VOD");var M=parseInt(w.parentalRating,10)||0;if(w){(A={isSubTagged:w.isSubTagged||!1,features:O(w),adGroupId:w.adGroupId+""||"",id:w.id,archived:w.archived,contentId:""+w.contentId,broadcastDate:w.broadCastDate?w.broadCastDate:0,duration:w.duration?w.duration:0,genre:w.genre&&w.genre.length>0&&w.genre[0]||"",genres:w.genre,drmProtected:w.encrypted,seasonNo:w.seasonNo,contentTitle:w.title,contentProvider:w.contentProvider,externalContentId:w.externalContentId,playbackUri:w.playbackUri,isNew:"Y"===w.isNew,lang:P(w),showId:w.showId,showContentId:w.showContentId,gameName:w.gameName,trailerParents:w.trailerParents,showName:w.showName?E.truncateString(w.showName,47):"",channelName:w.channelName?w.channelName:"",channelId:w.channelId?w.channelId:"",description:w.description,disney:w.disney,fox:w.fox,freemium:w.freemium,live:w.live,premium:w.premium,vip:w.vip,playbackType:w.playbackType,publishDate:w.broadCastDate?1e3*parseInt(w.broadCastDate,10):0,seasonId:w.seasonId,seriesId:w.showId,seasonName:w.seasonName||"",sportsSeasonId:w.sportsSeasonId,contentType:x,type:x,startDate:w.startDate,originalReq:p,meta:(0,b.getMetaDataOfWatchPage)(k),title:w.title,freemiumDelayed:!!(A.freemium&&R&&d)||w.freemium&&d,actors:w.actors,directors:w.directors&&w.directors.length>0?w.directors.join(", "):"",year:w.year,adult:(0,b.isAdult)(M),isSubscribedContent:(0,b.isContentSubscribed)(w),siMatchId:w.siMatchId,parentalRating:M,crisp:w.crisp,parentalRatingName:w.parentalRatingName,secondaryTitle:w.secondaryTitle||"",detail:w.detail||"",langObjs:w.langObjs||[],languageSelector:w.languageSelector||1,clipType:r,monetisable:w.monetisable,tournamentId:w.tournamentId,studioName:w.studioName,studioId:w.studioId,labels:w.labels,collections:w.collections,imageSets:w.imageSets,paywallTS:w.paywallTS,engTitle:w.engTitle||"",unifiedFeaturesObject:w.unifiedFeaturesObject}).meta=(0,f.default)({},n.setMetaForAsset(w),A.meta),w.episodeNo&&(A.episodeNo=w.episodeNo?w.episodeNo:0,A.episode="Episode "+A.episodeNo),A.image=n.extractImageData(w),A.imageAttributes=w.imageAttributes||null;var D=(0,b.getLabelsForMetaData)(A),N=D.primaryTitle,L=D.secondaryTitle;A.primaryTitle=N,A.secondaryTitle=L}("SPORT"===m||m.indexOf("LIVE")>-1||"SPORT"===x||x.indexOf("LIVE")>-1)&&(A.episode=null);var U={},W="TRAILER"===m;(0,a.default)(c).length>0&&(U=(0,b.getAdMetaData)(c,w,W,_,y));var q=A.lang,j=A.genre,H=k&&k.trays,V=S.matchMultiLangOptions,G=[];return(void 0===V?[]:V).forEach((function(e){G.push({contentTitle:e.title,contentId:e.contentId,type:e.contentType,language:e.lang[0]})})),A.multiLanguageInfo=G,{pageType:e.pageType,content:A,adMetadata:U,success:v,message:h,type:x,lang:q,genre:j,config:o,trays:H,source:T.apiSource.CMS,contentStartPointSeconds:t,clipType:r}}catch(e){return console.log("printing error in getContentDetailsResponse",e),{}}},n.getTrayResponse=function(e){return e?n.shouldSetMetaDetails(e)?n.addMetaDataInItems(e):e:{}},n.getSeasonsDataResponse=function(e){var t=e.config,r=void 0===t?{}:t,a=e.results,u=void 0===a?{}:a,o=u.item||{},i=n.addMetaDataInItems(u);return i.title="Season "+o.displaySeasonNo,i.source=T.apiSource.CMS,i.config=r,i},n.getTournamentDataResponse=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).results;return n.addMetaDataInItems(void 0===e?{}:e)},n.getHomePageDataResponse=function(e){var t=e.body,r=void 0===t?{}:t,a=r.results,u=void 0===a?{}:a,o=(0,f.default)({},e);return(0,y.default)(r)||(o.body.results=n.addMetaDataInItems(u)),delete o.config,o},n.getLoadMoreContentResponse=function(e){return n.isSuccessResponse(e)&&(e.body.results.items=e.body.results.items.map(n.addMetaProperties)),e},n.getMastheadResponse=function(e){var t=e.assets,r=(void 0===t?{}:t).items;return(void 0===r?[]:r).forEach((function(e){var t=e.line1,r=void 0===t?"":t,n=e.line2,a=void 0===n?"":n,u=e.line3,o=void 0===u?"":u,i=(r||"").split("|");e.line1=i[0]||r,e.line2=i[1]||a,e.line3=i[2]||o})),e},s=r,(0,c.default)(n,s)}return(0,l.default)(t,e),(0,s.default)(t,[{key:"getDetailRequest",value:function(e){return e}},{key:"getWatchPageDataResponse",value:function(e){var t=E.getNewObjectCopy(m.baseWatchPageModel);return t.contentDetail=e.contentDetails,t.trays.items=e.trays,t.originalReq=e.originalReq,t}},{key:"getDetailPageDataResponse",value:function(e){var t=E.getNewObjectCopy(m.baseWatchPageModel);return t.contentDetail=e.contentDetails||{},t.contentDetail.pageType="DETAIL_PAGE",t.trays.items=e.trays,t.source=T.apiSource.CMS,t.originalReq=e.originalReq,t}},{key:"shouldSetMetaDetails",value:function(e){var t=e.traySource,r=(void 0===t?"catalog":t).toLowerCase();return-1!==T.trayWithoutMeta.indexOf(r)}}],[{key:"extractInfoFromPlaybackSet",value:function(e){var t=e.tags_combination,r=e.licence_url,n=e.preroll_url,a=e.playback_cdn_type,u=e.playback_url,o=e.tagsCombination,i=e.licenceUrl,s=e.prerollUrl,c=e.playbackCDNType,l=e.playbackUrl,d=(0,p.default)(e,["tags_combination","licence_url","preroll_url","playback_cdn_type","playback_url","tagsCombination","licenceUrl","prerollUrl","playbackCDNType","playbackUrl"]);return(0,f.default)({},d,{tagsCombination:t||o,licenceUrl:r||i,prerollUrl:n||s,playbackCDNType:a||c,playbackUrl:u||l})}},{key:"extractVideoMetaDetails",value:function(e){if(!e)return{};var t=e.timelines,r=void 0===t?[]:t,n=e.url_meta,a=e.urlMeta,u=(0,p.default)(e,["timelines","url_meta","urlMeta"]),o=r.map((function(e){var t=e.element_type,r=e.end_time_ms,n=e.start_time_ms,a=e.elementType,u=e.endTimeMs,o=e.startTimeMs,i=(0,p.default)(e,["element_type","end_time_ms","start_time_ms","elementType","endTimeMs","startTimeMs"]);return(0,f.default)({},i,{elementType:t||a,endTimeMs:r||u,startTimeMs:n||o})}));return(0,f.default)({},u,{timelines:o,urlMeta:n||a})}},{key:"extractSubtitlesDetails",value:function(e){return e?e.map((function(e){var t=e.displayLangName,r=e.display_lang_name,n=(0,p.default)(e,["displayLangName","display_lang_name"]);return(0,f.default)({},n,{displayLangName:r||t})})):[]}},{key:"extractAdditionalInfoDetails",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(0===(0,a.default)(e).length)return{};var t=e.free_duration,r=(t=void 0===t?{}:t).total_time_in_millis,n=t.elapsed_time_in_millis,u=t.identifier,o=e.freeDuration,i=(o=void 0===o?{}:o).totalTimeInMillis,s=o.elapsedTimeInMillis,c=o.identifier,l=e.requiredPacks,d=e.required_packs,v=(0,p.default)(e,["free_duration","freeDuration","requiredPacks","required_packs"]);return(0,f.default)({},v,{freeDuration:{totalTimeInMillis:r||i,elapsedTimeInMillis:n||s,identifier:u||c},requiredPacks:d||l})}},{key:"getVideoUrlV2Response",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e||(e={});var r={success:e.success||!1,isMatch:e.isMatch||!1,watchPercentage:e.watchPercentage||0,originalReq:e.originalReq||{},drmClass:e.drmClass||"",additionalInfo:t.extractAdditionalInfoDetails(e.additionalInfo),responseHeaders:e.responseHeaders||{},videoMeta:t.extractVideoMetaDetails(e.videoMeta)},n=[];return(e.playbackSets||[]).forEach((function(e){var r={},a=t.extractInfoFromPlaybackSet(e);(a.tagsCombination||"").split(";").forEach((function(e){var t=e.split(":");r[t[0]]=t[1]}));var u=r.encryption&&"plain"!==r.encryption,o={src:a.playbackUrl||""},i=t.extractSubtitlesDetails(a.subtitles),s="";i.some((function(e){if((e.url||"").indexOf(".vtt")>-1)return s=e.url,!0})),n.push((0,f.default)({tagsObj:r,isDrmProtected:u},{cdnResp:o,drmResp:{licenseUri:a.licenceUrl||"",certificateUrl:a.certificate||"",vtt_url:s},textTracks:i,preRollUrl:a.prerollUrl||"",playbackCDNType:a.playbackCDNType||""}))})),(0,u.default)(r,{playbackSets:n}),r}}]),t}(h.default)},function(e,t,r){e.exports={default:r(202),__esModule:!0}},function(e,t,r){var n=r(17);e.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},,function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.commonOperations=void 0;var a=n(r(7)),u=n(r(8)),o=n(r(10)),i=n(r(1)),s=n(r(2)),c=r(0),l=r(16),d=function(){function e(){(0,i.default)(this,e)}return(0,s.default)(e,[{key:"getTray",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,o.default)(a.default.mark((function e(t){var r,n,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},t=this.validateTrayRequest(t),e.prev=2,n=t.trayType.toLowerCase().replace(/_/g," "),!t.fetchTrays){e.next=11;break}return o="get"+this.toCamelCase(n),e.next=8,(0,c.handleOperation)(o,t,i);case 8:r=e.sent,e.next=12;break;case 11:r=l.defaultTrayResponse;case 12:return e.abrupt("return",r);case 15:return e.prev=15,e.t0=e.catch(2),e.abrupt("return",u.default.resolve(l.defaultTrayResponse));case 18:case"end":return e.stop()}}),e,this,[[2,15]])})));return e}()},{key:"identifyTrays",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{var r=e.type.toLowerCase().replace(/_/g," "),n="get"+this.toCamelCase(r);return(0,c.handleOperation)(n,e,t)}catch(e){return u.default.resolve(l.defaultIdentifyTrayResponse)}}},{key:"toCamelCase",value:function(e){return e.toLowerCase().replace(/(?:(^.)|(\s+.))/g,(function(e){return e.charAt(e.length-1).toUpperCase()}))}},{key:"validateTrayRequest",value:function(e){var t="",r=!0;e.hasMoreData=!0;try{e.config||(r=!1,console.warn("Please pass app config data")),e.trayType||(r=!1,console.warn("Please pass app config data")),t=e.trayType||"",0>l.skipTrayCall.contentTypes.indexOf(t)||(r=!1),e.trayType=t||e.trayType,e.fetchTrays=r}catch(e){}return e}}]),e}();t.commonOperations=new d,t.default=new d},function(e,t,r){e.exports={default:r(232),__esModule:!0}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(r(28)),u=n(r(3)),o=n(r(1)),i=n(r(2)),s=n(r(4)),c=n(r(5)),l=n(r(0)),d=n(r(37)),f=l.default.constants,p=l.default.config;t.default=function(e){function t(){var e;(0,o.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,u.default)(t)).call(this));return r.authKeys=(e={},(0,a.default)(e,f.PROD_ENV,"a0aa8bcf9dd58ec6e3b57d9b4e5a0080b1450df7436cfa22dd5cffdfea8e1252"),(0,a.default)(e,f.STAG_ENV,"a0aa8bcf9dd58ec6e3b57d9b4e5a0080b1450df7436cfa22dd5cffdfea8e1252"),(0,a.default)(e,f.QA_ENV,"a0aa8bcf9dd58ec6e3b57d9b4e5a0080b1450df7436cfa22dd5cffdfea8e1252"),(0,a.default)(e,f.PP_ENV,"a0aa8bcf9dd58ec6e3b57d9b4e5a0080b1450df7436cfa22dd5cffdfea8e1252"),(0,a.default)(e,f.LOAD_ENV,"a0aa8bcf9dd58ec6e3b57d9b4e5a0080b1450df7436cfa22dd5cffdfea8e1252"),e),r}return(0,c.default)(t,e),(0,i.default)(t,[{key:"isRegionalPopularityEnabledOld",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).REGIONAL_POPULARITY_ENABLED||["IN"];return e=(e||"").toUpperCase(),t.indexOf(e)>=0}},{key:"isRegionalPopularityEnabled",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(p.initConfig.getConfig()||{}).enableRegionalPopularity;return"boolean"==typeof r?r:this.isRegionalPopularityEnabledOld(e,t)}},{key:"_getRequestHeaders",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],r=p.initConfig.getConfig()||{},n=r.tenant,a=r.channel,u=e.userToken,o={"x-country-code":(n||"IN").toUpperCase(),"x-platform-code":a,"x-client-code":"LR",hotstarauth:this.getAuthToken(),"X-HS-UserToken":u};return t&&this.isRegionalPopularityEnabled(n,e)&&(o["x-region-code"]=e.region),o}}]),t}(d.default)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(r(3)),u=n(r(1)),o=n(r(4)),i=n(r(5)),s=n(r(237)),c=n(r(18));t.default=new(function(e){function t(){(0,u.default)(this,t);var e=(0,o.default)(this,(t.__proto__||(0,a.default)(t)).call(this));return e.apiConfigs=s.default,e}return(0,i.default)(t,e),t}(c.default))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(r(23)),u=n(r(1)),o=n(r(2)),i=n(r(241));t.default=new(function(){function e(){(0,u.default)(this,e)}return(0,o.default)(e,[{key:"hasContentDetails",value:function(e,t){try{var r=(e.data.items||[])[0];return!(!r||!t[r])}catch(e){return!1}}},{key:"getPathFromMacrosHash",value:function(e,t){var r=e;return(0,a.default)(t).forEach((function(e){r=r.replace(RegExp("{"+e+"}","g"),t[e])})),r=r.replace(/{.*?}/g,"null")}},{key:"getFormattedLpvHeader",value:function(e){if(!e)return"";var t=[];return((i.default.getLPVForUser(e)||{}).lpv||[]).forEach((function(e){var r=e.code.toLowerCase()+"="+e.score.toFixed(3);t.push(r)})),t.join(",")}},{key:"getLpvAndSubsStatusObj",value:function(e,t){var r=t.subsStatusHeader,n={"x-subscription-type":void 0===r?"Free":r},a=this.getFormattedLpvHeader(e);return a&&(n["x-lpv"]=a),n}}]),e}())},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WL_OPERATIONS={READ:"READ",ADD:"ADD",DELETE:"DELETE"}},function(e,t,r){"use strict";function n(e){var t=Array.isArray(e)?e:[e];return function(e){return t.reduce((function(e,t){return t instanceof Function?t(e):e}),e)}}function a(e){return e}Object.defineProperty(t,"__esModule",{value:!0}),t.resetCacheableEntries=t.cacheable=t.doNothingAdapter=t.requestAdapter=t.responseAdapter=void 0;var u=function(e){return e&&e.__esModule?e:{default:e}}(r(8)),o=function(e){return function(t,r,n){var a=n.value;return n.value=function(){var t=e(Array.prototype.slice.call(arguments)[0]);return a.call(this,t)},n}},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return function(r,a,o){var i=o.value;return o.value=function(){var r=arguments,a=this;return new u.default((function(u,o){i.apply(a,Array.prototype.slice.call(r)).then((function(t){var r=n(e)(t);void 0===r.success||r.success?u(r):o(r)})).catch((function(e){var r=n(t)(e);o(r)}))}))},o}},s=function(){return function(e,t,r){return Array.isArray(e.obj_cacheable_entries)?e.obj_cacheable_entries.push(t):e.obj_cacheable_entries=[t],r}},c=function(){};t.responseAdapter=i,t.requestAdapter=o,t.doNothingAdapter=a,t.cacheable=s,t.resetCacheableEntries=c},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CWState=t.getTrayType=t.TRAY_TYPE_TO_SOURCE_MAP=t.SLATE_ACTION_TYPE=t.ENTITLEMENT_V1_ERROR_TYPE=t.REFRESH_TOKEN_ERROR_TYPE=t.PLAYBACK_COMPOSITE_ERROR_TYPE=void 0;var a=n(r(1)),u=n(r(2)),o=r(16);Object.defineProperty(t,"PLAYBACK_COMPOSITE_ERROR_TYPE",{enumerable:!0,get:function(){return o.PLAYBACK_COMPOSITE_ERROR_TYPE}}),Object.defineProperty(t,"REFRESH_TOKEN_ERROR_TYPE",{enumerable:!0,get:function(){return o.REFRESH_TOKEN_ERROR_TYPE}}),Object.defineProperty(t,"ENTITLEMENT_V1_ERROR_TYPE",{enumerable:!0,get:function(){return o.ENTITLEMENT_V1_ERROR_TYPE}}),Object.defineProperty(t,"SLATE_ACTION_TYPE",{enumerable:!0,get:function(){return o.SLATE_ACTION_TYPE}}),Object.defineProperty(t,"TRAY_TYPE_TO_SOURCE_MAP",{enumerable:!0,get:function(){return o.trayTypeToSourceMap}});var i=r(112);Object.defineProperty(t,"getTrayType",{enumerable:!0,get:function(){return i.getTrayType}});var s=r(113);Object.defineProperty(t,"CWState",{enumerable:!0,get:function(){return s.CWState}}),r(200),r(243),r(244),r(261);var c=r(0),l=n(r(118));t.default=new(function(){function e(){(0,a.default)(this,e)}return(0,u.default)(e,[{key:"getContentDetails",value:function(){return(0,c.handleOperation)("getContentDetails",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getTray",value:function(){return(0,c.handleOperation)("getTray",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"identifyTrays",value:function(e,t){return l.default.identifyTrays(e,t)}},{key:"getTrays",value:function(){return(0,c.handleOperation)("getTrays",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getWatchPageData",value:function(){return(0,c.handleOperation)("getWatchPageData",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getDetailPageData",value:function(){return(0,c.handleOperation)("getDetailPageData",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getSeasonsData",value:function(e,t){return(0,c.handleOperation)("getSeasonsData",e,t)}},{key:"getWatchlist",value:function(e,t){return(0,c.handleOperation)("getWatchlist",e,t)}},{key:"addToWatchlist",value:function(e,t){return(0,c.handleOperation)("addToWatchlist",e,t)}},{key:"removeFromWatchlist",value:function(e,t){return(0,c.handleOperation)("removeFromWatchlist",e,t)}},{key:"getWatchNext",value:function(){return(0,c.handleOperation)("getWatchNext",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"checkConcurrency",value:function(){return(0,c.handleOperation)("checkConcurrency",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"removeConcurrency",value:function(){return(0,c.handleOperation)("removeConcurrency",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"concurrencyHeartbeat",value:function(){return(0,c.handleOperation)("concurrencyHeartbeat",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getAllAssets",value:function(){return(0,c.handleOperation)("getAllAssets",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"searchAsset",value:function(){return(0,c.handleOperation)("searchAsset",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getCompositePlaybackUrlV2",value:function(){return(0,c.handleOperation)("getCompositePlaybackUrlV2",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getCompositePlaybackUrl",value:function(){return(0,c.handleOperation)("getCompositePlaybackUrl",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"verifyAndReturnPlaybackUrl",value:function(){return(0,c.handleOperation)("verifyAndReturnPlaybackUrl",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getUserPlaybackConsent",value:function(){return(0,c.handleOperation)("getUserPlaybackConsent",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"rucSetItem",value:function(){return(0,c.handleOperation)("rucSetItem",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"rucSetModule",value:function(){return(0,c.handleOperation)("rucSetModule",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"rucGetItem",value:function(){return(0,c.handleOperation)("rucGetItem",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"rucRemoveItem",value:function(){return(0,c.handleOperation)("rucRemoveItem",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"updateCWTrayItem",value:function(){return(0,c.handleOperation)("updateCWTrayItem",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"cleanLocalCWData",value:function(){return(0,c.handleOperation)("cleanLocalCWData",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"loadMoreAssets",value:function(){return(0,c.handleOperation)("loadMoreAssets",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getTournamentData",value:function(){return(0,c.handleOperation)("getTournamentData",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"loadMoreSports",value:function(){return(0,c.handleOperation)("loadMoreSports",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"loadMoreTournaments",value:function(){return(0,c.handleOperation)("loadMoreTournaments",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getTrayFromId",value:function(){return(0,c.handleOperation)("getTrayFromId",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getHomePageData",value:function(){return(0,c.handleOperation)("getHomePageData",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getMasthead",value:function(){return(0,c.handleOperation)("getMasthead",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getMultiContentDetails",value:function(e,t){return(0,c.handleOperation)("getMultiContentDetails",e,t)}},{key:"fetchCWTray",value:function(e,t){return(0,c.handleOperation)("fetchCWTray",e,t)}},{key:"fetchCWMovieProgress",value:function(e,t){return(0,c.handleOperation)("fetchCWMovieProgress",e,t)}},{key:"fetchCWShowProgress",value:function(e,t){return(0,c.handleOperation)("fetchCWShowProgress",e,t)}},{key:"fetchCWTrayWithLocalBackup",value:function(e,t){return(0,c.handleOperation)("fetchCWTrayWithLocalBackup",e,t)}},{key:"removeCWItem",value:function(e,t){return(0,c.handleOperation)("removeCWItem",e,t)}},{key:"getContinueWatchingTray",value:function(e,t){return(0,c.handleOperation)("getContinueWatchingTray",e,t)}},{key:"fetchLpv",value:function(e,t){return(0,c.handleOperation)("fetchLpv",e,t)}},{key:"postLpv",value:function(e,t){return(0,c.handleOperation)("postLpv",e,t)}}]),e}())},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{default:e}}(r(201));(0,r(0).registerOperations)("CMS",n.default)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r,n,a){var u={};return Object.keys(n).forEach((function(e){u[e]=n[e]})),u.enumerable=!!u.enumerable,u.configurable=!!u.configurable,("value"in u||u.initializer)&&(u.writable=!0),u=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),u),a&&void 0!==u.initializer&&(u.value=u.initializer?u.initializer.call(a):void 0,u.initializer=void 0),void 0===u.initializer&&(Object.defineProperty(e,t,u),u=null),u}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,o,i,s,c,l,d,f,p,v,h,y,g,m,_,b,T,I,E,R,C,O,P,S,k=n(r(15)),w=n(r(11)),A=n(r(20)),x=n(r(7)),M=n(r(8)),D=n(r(6)),N=n(r(10)),L=n(r(1)),U=n(r(2)),W=r(0),q=n(r(114)),j=n(r(34)),H=r(86),V=n(r(230)),G=r(59),Y=r(112),F=r(118),B=r(16),K=n(r(92)),z=r(124),$=new j.default,J=new H.HotstarAVSCommonsService,Q=new K.default,X=W.utils.baseUtils,Z=new q.default;t.default=(u=(0,W.requestAdapter)(Z.getDetailRequest),o=(0,W.responseAdapter)(Z.getMovieDataResponse),i=(0,W.requestAdapter)(Z.getDetailRequest),s=(0,W.responseAdapter)(Z.getEpisodeDataResponse),c=(0,W.requestAdapter)(Z.getDetailRequest),l=(0,W.responseAdapter)(Z.getClipDataResponse),d=(0,W.requestAdapter)(Z.getDetailRequest),f=(0,W.responseAdapter)(Z.getMatchDataResponse),p=(0,W.responseAdapter)(Z.getShowDataResponse),v=(0,W.responseAdapter)(Z.getWatchPageDataResponse,z.doNothingAdapter),h=(0,W.responseAdapter)(Z.getDetailPageDataResponse,z.doNothingAdapter),y=(0,W.responseAdapter)(Z.getSeasonsDataResponse),g=(0,W.requestAdapter)(Z.getContentDefaultRequest),m=(0,W.responseAdapter)(Z.getSearchContentResponse),_=(0,W.responseAdapter)(Z.getLoadMoreContentResponse),b=(0,W.responseAdapter)(Z.getTrayResponse),T=(0,W.responseAdapter)(Z.getHomePageDataResponse),I=(0,W.responseAdapter)(Z.getMastheadResponse),E=(0,W.responseAdapter)(Z.getTournamentDataResponse),R=(0,W.responseAdapter)(Z.getHomePageDataResponse),C=(0,W.responseAdapter)(Z.getTournamentDataResponse),O=(0,W.requestAdapter)(Z.getTraysRequest),P=(0,W.responseAdapter)(Z.getTraysResponse),S=function(){function e(){(0,L.default)(this,e),this.apiRegistry=V.default}return(0,U.default)(e,[{key:"getData",value:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t,r){var n,a,u,o;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.prev=1,a=this.apiRegistry.getPath(t,r),u=$._getRequestHeaders(t.config),o=(0,D.default)({headers:u},$.getDefaultCachePolicy()),e.next=7,W.HttpLib.get(a,o);case 7:(n=e.sent).body.statusCode=n.statusCode,e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",M.default.reject(e.t0));case 14:return e.abrupt("return",n.body);case 15:case"end":return e.stop()}}),e,this,[[1,11]])})));return e}()},{key:"getVideoSettings",value:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t,r){var n,a,u,o,i;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.CUE_POINT_URL,a=r.ADV_SERVER_URL,u=(0,G.getCuePointUrl)(t,n),e.next=4,M.default.all([J.getCuePoints(u)]);case 4:return o=e.sent,i={cuepointsMidroll:o[0],vpSpotClickThruMode:1,vphost:a,vptags:"CID_"+t},e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return e}()},{key:"getContentDetails",value:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t,r){var n,a,u,o,i,s,c,l,d,f,p,v,h,y,g,m;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=(0,A.default)({},t),a=t.config,u=t.pathVars,o=t.addnlParams,i=void 0===o?{}:o,s=u.contentId,c=u.siMatchId,l=u.id,n.querystring=n.querystring||{},c?n.querystring.siMatchId=c:l?n.querystring.id=l:n.querystring.contentId=s,d=i,e.next=9,this.getData(n,r);case 9:if(f=e.sent,p=f.results,s=(v=void 0===p?{}:p).item&&v.item.contentId,t.pathVars.contentId=s,h={},y=v.item&&v.item.live,g=v.item&&v.item.contentStartPointSeconds,m=v.item&&v.item.clipType,!t.watchPage||t.isLive){e.next=21;break}return e.next=20,this.getVideoSettings(s,a);case 20:h=e.sent;case 21:return e.abrupt("return",{pageType:t.pageType,config:a,contentDetails:f,reqParams:d,videoPlazaSettings:h,isLiveMatch:y,originalReq:t,contentStartPointSeconds:g,clipType:m});case 24:return e.prev=24,e.t0=e.catch(0),e.abrupt("return",M.default.reject(e.t0));case 27:case"end":return e.stop()}}),e,this,[[0,24]])})));return e}()},{key:"getMovieData",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t){var r;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,this.getContentDetails(t,"getMovieDetails");case 4:return r=e.sent,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",M.default.reject(e.t0));case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return e}()},{key:"getEpisodeData",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t){var r;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,this.getContentDetails(t,"getEpisodeDetails");case 4:return r=e.sent,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",M.default.reject(e.t0));case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return e}()},{key:"getClipData",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t){var r;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,this.getContentDetails(t,"getNewsClipDetails");case 4:return r=e.sent,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",M.default.reject(e.t0));case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return e}()},{key:"getMatchData",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t){var r;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,this.getContentDetails(t,"getSportClipDetails");case 4:return r=e.sent,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",M.default.reject(e.t0));case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return e}()},{key:"getShowData",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t){var r;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,this.getContentDetails(t,"getShowDetails");case 4:r=e.sent,e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",M.default.reject(e.t0));case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e,this,[[1,7]])})));return e}()},{key:"getWatchPageData",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t){var r,n,a,u;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={},n={},t.watchPage=!0,a=t.type,u=(0,G.getContentType)(a),e.prev=5,e.t0=u,e.next="MOVIE"===e.t0?9:"EPISODE"===e.t0?13:"NEWS"===e.t0?17:"SPORT"===e.t0?21:25;break;case 9:return e.next=11,this.getMovieData(t);case 11:return n=e.sent,e.abrupt("break",29);case 13:return e.next=15,this.getEpisodeData(t);case 15:return n=e.sent,e.abrupt("break",29);case 17:return e.next=19,this.getClipData(t);case 19:return n=e.sent,e.abrupt("break",29);case 21:return e.next=23,this.getMatchData(t);case 23:return n=e.sent,e.abrupt("break",29);case 25:return e.next=27,this.getClipData(t);case 27:return n=e.sent,e.abrupt("break",29);case 29:if(n.success){e.next=31;break}return e.abrupt("return",M.default.reject(n));case 31:return r.trays=[],r.contentDetails=n,e.abrupt("return",r);case 36:return e.prev=36,e.t1=e.catch(5),e.abrupt("return",M.default.reject(e.t1));case 39:case"end":return e.stop()}}),e,this,[[5,36]])})));return e}()},{key:"getDetailPageData",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t){var r,n,a,u;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={},n={},a=t.type,u=(0,G.getContentType)(a),e.prev=4,e.t0=u,e.next="MOVIE"===e.t0?8:"SERIES"===e.t0?12:16;break;case 8:return e.next=10,this.getMovieData(t);case 10:return n=e.sent,e.abrupt("break",20);case 12:return e.next=14,this.getShowData(t);case 14:return n=e.sent,e.abrupt("break",20);case 16:return e.next=18,this.getClipData(t);case 18:return n=e.sent,e.abrupt("break",20);case 20:if(n.success){e.next=22;break}return e.abrupt("return",M.default.reject(n));case 22:return r.trays=[],r.contentDetails=n,e.abrupt("return",r);case 27:return e.prev=27,e.t1=e.catch(4),e.abrupt("return",M.default.reject(e.t1));case 30:case"end":return e.stop()}}),e,this,[[4,27]])})));return e}()},{key:"getSeasonsData",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t){var r,n,a,u;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,n=(0,A.default)({},t),a=t.id,u=t.config,n.querystring=n.querystring||{},n.querystring.id=a,e.next=8,this.getData(n,"getSeasonsData");case 8:(r=e.sent).config=u,e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return",M.default.reject(e.t0));case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}}),e,this,[[1,12]])})));return e}()},{key:"getAllAssets",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t){var r;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.getAllAssets(t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return e}()},{key:"searchAsset",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t){var r,n,a,u,o,i,s,c;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},n=$._getRequestHeaders(t.config),a={headers:n},e.prev=3,t.querystring=t.querystring||{},t.querystring.title=encodeURIComponent(t.querystring.title),u=this.apiRegistry.getPath(t,"searchAsset"),e.next=9,W.HttpLib.get(u,a);case 9:if(o=e.sent,i=X.safelyReturnNestedValue(["body","results","items",0],o)){e.next=15;break}throw Error("unable to fetch details");case 15:return s=X.updateUrlParameter(i.uri,"perPage",t.pathVars.perPage),t.querystring.ct&&(c={ct:t.querystring.ct},s+=X.createQueryParam({endpoint:s,data:c})),e.next=19,W.HttpLib.get(s,a);case 19:return(r=e.sent).entityDetails=i,e.abrupt("return",r);case 22:e.next=27;break;case 24:return e.prev=24,e.t0=e.catch(3),e.abrupt("return",M.default.reject(e.t0));case 27:case"end":return e.stop()}}),e,this,[[3,24]])})));return e}()},{key:"loadMoreAssets",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t){var r,n,a,u;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},!(n=X.safelyReturnNestedValue(["body","results","assets","nextOffsetURL"],t.data,"")||X.safelyReturnNestedValue(["body","results","nextOffsetURL"],t.data,""))){e.next=15;break}return e.prev=3,a=$._getRequestHeaders(t.config),u={headers:a},e.next=8,W.HttpLib.get(n,u);case 8:return r=e.sent,e.abrupt("return",r);case 12:return e.prev=12,e.t0=e.catch(3),e.abrupt("return",M.default.reject(e.t0));case 15:case"end":return e.stop()}}),e,this,[[3,12]])})));return e}()},{key:"fetchFromNextOffsetURL",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t){var r,n,a,u=t.config,o=t.nextOffsetURL;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},!o){e.next=14;break}return e.prev=2,n=$._getRequestHeaders(u),a={headers:n,skipcache:!0},e.next=7,W.HttpLib.get(o,a);case 7:r=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",M.default.reject(e.t0));case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,this,[[2,10]])})));return e}()},{key:"fetchTray",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t){var r,n,a;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.config||t.originalReq.config,n=t.nextOffsetURL||t.assets.nextOffsetURL,e.next=4,this.fetchFromNextOffsetURL({config:r,nextOffsetURL:n});case 4:return a=e.sent,e.abrupt("return",a.body.results);case 6:case"end":return e.stop()}}),e,this)})));return e}()},{key:"getTrayFromId",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t){var r,n,a;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,this.getData(t,"getTrayFromId");case 4:return n=e.sent,(a=n.results||{}).config=t.config,a.contentId=t.contentId,a.userId=t.userId,e.next=11,this.getTray(a);case 11:(r=e.sent).title=a.title,e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(1),e.abrupt("return",M.default.reject(e.t0));case 18:return e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,this,[[1,15]])})));return e}()},{key:"fetchCapeTray",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t){var r,n,a,u,o,i,s,c,l,d,f,p;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,n=t.userId,a=t.addIdentifier,u=void 0===a?"":a,o=t.config,i=t.offset,s=void 0===i?0:i,c=t.token,l=t.size,d=void 0===l?B.PAGINATION_SIZE:l,f=t.userToken,o.skipCache=!!c,p={userId:n,trayType:u,config:o,offset:s,size:d,token:c,userToken:f},e.next=7,F.commonOperations.getTray(p);case 7:r=e.sent,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.warn("fetchCapeTray failed",e.t0),r=(0,D.default)({},B.defaultTrayResponse);case 14:return r.title=r.title||t.title,e.abrupt("return",r);case 16:case"end":return e.stop()}}),e,this,[[1,10]])})));return e}()},{key:"fetchPxTray",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t){var r,n;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.trayTypeId,n={},e.prev=2,e.t0=r,e.next=e.t0===B.trayTypeIdMap.LEADERBOARD?6:10;break;case 6:return e.next=8,this.fetchLeaderboardTray(t);case 8:return n=e.sent,e.abrupt("break",11);case 10:n=(0,D.default)({},B.defaultTrayResponse);case 11:e.next=17;break;case 13:e.prev=13,e.t1=e.catch(2),console.error("fetchPxTray failed",e.t1),n=(0,D.default)({},B.defaultTrayResponse);case 17:return n.title=n.title||t.title,e.abrupt("return",n);case 19:case"end":return e.stop()}}),e,this,[[2,13]])})));return e}()},{key:"fetchLeaderboardTray",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t){var r,n,a,u,o,i,s,c,l,d,f,p,v;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,n=t.config,a=void 0===n?{}:n,u=t.assetFetchUri,o=t.assets,i=void 0===o?{}:o,s=t.userId,c=a.defaultLpv,l=i.items,d=void 0===l?[]:l,e.next=7,Q.getLpvHeader(t);case 7:if(e.t0=e.sent){e.next=10;break}e.t0=c;case 10:if((f=e.t0)&&s){e.next=13;break}throw Error("failed to get LPV");case 13:if(a.lpvHeader=f,!i.nextOffsetURL){e.next=19;break}return e.next=17,this.fetchTray(t);case 17:return r=e.sent,e.abrupt("return",{assets:r});case 19:if(!u||d.length){e.next=26;break}return p=$._getRequestHeaders(a),v={headers:p},e.next=24,W.HttpLib.get(u,v);case 24:return r=e.sent,e.abrupt("return",{assets:r.body.results});case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(1),console.warn("fetchLeaderboardTray",e.t1);case 31:return r=(0,D.default)({},B.defaultTrayResponse),e.abrupt("return",r);case 33:case"end":return e.stop()}}),e,this,[[1,28]])})));return e}()},{key:"fetchPersonaTray",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t){var r,n,a,u,o,i;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={},e.prev=1,n=B.trayTypeIdMap.PERSONA_WITHOUT_META,a=B.trayTypeIdMap.PERSONA_WITH_META,u=B.trayTypeIdMap.WATCHLIST,o=B.trayTypeIdMap.PERSONA_MASTHEAD,i=t.trayTypeId,e.t0=i,e.next=e.t0===u?7:e.t0===n||e.t0===a||e.t0===o?11:14;break;case 7:return e.next=9,Q.getWatchlist(t);case 9:return r=e.sent,e.abrupt("return",r);case 11:return e.next=13,Q.fetchPersonaTray(t);case 13:r=e.sent;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(1),r=(0,D.default)({},B.defaultTrayResponse);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e,this,[[1,16]])})));return e}()},{key:"getTray",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t){var r,n,a,u,o,i;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(0,Y.getTrayType)(t),t.source=B.trayTypeToSourceMap[r]||r,n={},a=t.assets||{},e.t0=r,e.next="catalog"===e.t0?7:"px"===e.t0?18:"cape"===e.t0?23:"persona"===e.t0?30:37;break;case 7:if(a.items||a.nextOffsetURL||(a.items=[]),u=a.items||[],o=a,u.length&&!t.fetchMoreData||!a.nextOffsetURL){e.next=15;break}return e.next=13,this.fetchTray(t);case 13:i=e.sent,o=void 0!==i.assets?i.assets:i;case 15:return t.allCardsFetched=t.fetchMoreData&&!a.nextOffsetURL,t.assets=t.allCardsFetched?{items:[]}:o,e.abrupt("break",37);case 18:return e.next=20,this.fetchPxTray(t);case 20:return n=e.sent,t=(0,D.default)({},t,n),e.abrupt("break",37);case 23:return t.traySource="cape",e.next=26,this.fetchCapeTray(t);case 26:return n=e.sent,(t=(0,D.default)({},t,n)).cardLogic=n.cardLogic||t.addIdentifier,e.abrupt("break",37);case 30:return t.traySource="persona",e.next=33,this.fetchPersonaTray(t);case 33:return n=e.sent,(t=(0,D.default)({},t,n)).cardLogic=t.addIdentifier,e.abrupt("break",37);case 37:return e.abrupt("return",t);case 38:case"end":return e.stop()}}),e,this)})));return e}()},{key:"fetchMoreTrays",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t){var r,n,a;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},n=t.trays,e.prev=2,a={config:t.config,nextOffsetURL:n.nextOffsetURL},e.next=6,this.fetchTray(a);case 6:r=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,this,[[2,9]])})));return e}()},{key:"getHomePageData",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t){var r,n,a,u,o,i,s,c,l,d,f,p,v,h,y,g,m,_,b,T,I,E,R,C,O,P,S;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},n=t.menuApi,a=void 0===n?"":n,u=t.region,o=t.config,i=void 0===o?{}:o,s=t.headers,c=void 0===s?{}:s,l=i.variantList,d=void 0===l?[]:l,e.prev=3,a){e.next=6;break}throw Error("menuApi is not passed !!");case 6:return c=(0,D.default)({},$._getRequestHeaders({region:u,variantList:d}),c),f={headers:c},e.next=10,W.HttpLib.get(a,f);case 10:(r=e.sent).config=i,r.body.statusCode=r.statusCode,p=r.body,v=(void 0===p?{}:p).results,y=(h=void 0===v?{}:v).trays,m=(g=void 0===y?{}:y).items,_=void 0===m?[]:m,g.items=_.filter((function(e){return!(0,Y.isNonRenderableTray)(e)})),b=g.items.length,T=!!g.nextOffsetURL;case 20:if(b>=B.contentPagination.betrayPageSize||!T){e.next=35;break}return I=h.trays,E=void 0===I?{}:I,e.next=24,this.fetchMoreTrays((0,D.default)({},h,{config:i}));case 24:R=e.sent,C=R.items,O=void 0===C?[]:C,R.items=O.filter((function(e){return!(0,Y.isNonRenderableTray)(e)})),P=[].concat((0,w.default)(E.items),(0,w.default)(R.items)),S=(0,D.default)({},E,R),b=P.length,S.items=P,h.trays=S,T=!!R.nextOffsetURL,e.next=20;break;case 35:e.next=41;break;case 37:return e.prev=37,e.t0=e.catch(3),console.log("Error while fetching home page data. menuApi:: "+a,e.t0),e.abrupt("return",M.default.reject(r));case 41:return e.abrupt("return",r);case 42:case"end":return e.stop()}}),e,this,[[3,37]])})));return e}()},{key:"getMasthead",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t){var r,n,a,u,o,i,s,c;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],n=t.mastheadConfig,a=void 0===n?{}:n,u=t.config,o=void 0===u?{}:u,i=t.userToken,s=t.userId,c=t.pageName,e.prev=2,e.next=5,this.getTray((0,D.default)({},a,{config:o,userToken:i,userId:s,pageName:c}));case 5:r=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),console.log("ERROR::","Failed to fetch mastheads",e.t0),e.abrupt("return",M.default.reject(r));case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,this,[[2,8]])})));return e}()},{key:"getTournamentData",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t){var r,n;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,(n=(0,A.default)({},t)).pathVars={seriesId:t.seriesId},e.next=6,this.getData(n,"getTournamentData");case 6:r=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),M.default.resolve(e.t0);case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,this,[[1,9]])})));return e}()},{key:"loadMoreSports",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t){var r,n,a;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.config,n=t.nextOffsetURL,e.next=3,this.fetchFromNextOffsetURL({config:r,nextOffsetURL:n});case 3:return(a=e.sent).config=r,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return e}()},{key:"loadMoreTournaments",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t){var r,n,a,u,o,i;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,n=t.config,a=t.nextOffsetURL,u=$._getRequestHeaders(n),o={headers:u},e.next=7,W.HttpLib.get(a,o);case 7:i=e.sent,r=i.body,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0,"error in loadMoreTournaments"),M.default.reject(e.t0);case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}}),e,this,[[1,11]])})));return e}()},{key:"getTrays",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t){var r,n,a,u,o,i,s,c,l,d,f,p,v,h,y,g,m,_,b=this;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],n=[],a=!1,e.prev=3,u=t.trays,o=t.userId,i=t.contentId,s=t.config,c=void 0===s?{}:s,l=t.pageName,d=t.userToken,f=u.size,p=u.items,v=void 0===p?[]:p,u.items=v.filter((function(e){return!(0,Y.isNonRenderableTray)(e)})),h=u.items,u.page=u.page||0,y=u.page*B.contentPagination.betrayPageSize,g=y+B.contentPagination.betrayPageSize,m=h.length>g,a=!u.nextOffsetURL&&!m;case 14:if(g<=h.length){e.next=26;break}if(!a){e.next=17;break}return e.abrupt("break",26);case 17:return e.next=19,this.fetchMoreTrays(t);case 19:(_=e.sent).items=(_.items||[]).filter((function(e){return!(0,Y.isNonRenderableTray)(e)})),(_.items||[]).length&&(u.items=u.items.concat(_.items),h=u.items),u.nextOffsetURL=_.nextOffsetURL,a=!u.nextOffsetURL&&g>h.length,e.next=14;break;case 26:if((h=h.slice(y,g)).forEach((function(e){var t=X.getNewObjectCopy(e),r={userId:o,config:c,contentId:i,size:f,pageName:l,userToken:d},a=(0,A.default)(t,r);n.push(b.getTray(a))})),!n.length){e.next=32;break}return e.next=31,M.default.all(n).then((function(e){var t=[];return e.forEach((function(e){t=t.concat(e)})),t}));case 31:r=e.sent;case 32:return e.abrupt("return",{traysResp:r,traysReq:t,allTraysFetched:a});case 35:return e.prev=35,e.t0=e.catch(3),console.log("Error while fetching trays::",e.t0),e.abrupt("return",M.default.reject(e.t0));case 39:case"end":return e.stop()}}),e,this,[[3,35]])})));return e}()},{key:"getMultiContentDetails",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,N.default)(x.default.mark((function e(t){return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$.getMultiGetContent(t));case 1:case"end":return e.stop()}}),e,this)})));return e}()}]),e}(),a(S.prototype,"getMovieData",[u,o],(0,k.default)(S.prototype,"getMovieData"),S.prototype),a(S.prototype,"getEpisodeData",[i,s],(0,k.default)(S.prototype,"getEpisodeData"),S.prototype),a(S.prototype,"getClipData",[c,l],(0,k.default)(S.prototype,"getClipData"),S.prototype),a(S.prototype,"getMatchData",[d,f],(0,k.default)(S.prototype,"getMatchData"),S.prototype),a(S.prototype,"getShowData",[p],(0,k.default)(S.prototype,"getShowData"),S.prototype),a(S.prototype,"getWatchPageData",[v],(0,k.default)(S.prototype,"getWatchPageData"),S.prototype),a(S.prototype,"getDetailPageData",[h],(0,k.default)(S.prototype,"getDetailPageData"),S.prototype),a(S.prototype,"getSeasonsData",[y],(0,k.default)(S.prototype,"getSeasonsData"),S.prototype),a(S.prototype,"searchAsset",[g,m],(0,k.default)(S.prototype,"searchAsset"),S.prototype),a(S.prototype,"loadMoreAssets",[_],(0,k.default)(S.prototype,"loadMoreAssets"),S.prototype),a(S.prototype,"getTray",[b],(0,k.default)(S.prototype,"getTray"),S.prototype),a(S.prototype,"getHomePageData",[T],(0,k.default)(S.prototype,"getHomePageData"),S.prototype),a(S.prototype,"getMasthead",[I],(0,k.default)(S.prototype,"getMasthead"),S.prototype),a(S.prototype,"getTournamentData",[E],(0,k.default)(S.prototype,"getTournamentData"),S.prototype),a(S.prototype,"loadMoreSports",[R],(0,k.default)(S.prototype,"loadMoreSports"),S.prototype),a(S.prototype,"loadMoreTournaments",[C],(0,k.default)(S.prototype,"loadMoreTournaments"),S.prototype),a(S.prototype,"getTrays",[O,P],(0,k.default)(S.prototype,"getTrays"),S.prototype),S)},function(e,t,r){r(61),r(25),r(33),r(203),r(209),r(212),r(214),e.exports=r(9).Set},function(e,t,r){"use strict";var n=r(204),a=r(116);e.exports=r(205)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return n.def(a(this,"Set"),e=0===e?0:e,e)}},n)},function(e,t,r){"use strict";var n=r(21).f,a=r(52),u=r(73),o=r(24),i=r(71),s=r(45),c=r(64),l=r(98),d=r(105),f=r(19),p=r(50).fastKey,v=r(116),h=f?"_s":"size",y=function(e,t){var r,n=p(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,c){var l=e((function(e,n){i(e,l,t,"_i"),e._t=t,e._i=a(null),e._f=void 0,e._l=void 0,e[h]=0,null!=n&&s(n,r,e[c],e)}));return u(l.prototype,{clear:function(){for(var e=v(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[h]=0},delete:function(e){var r=v(this,t),n=y(r,e);if(n){var a=n.n,u=n.p;delete r._i[n.i],n.r=!0,u&&(u.n=a),a&&(a.p=u),r._f==n&&(r._f=a),r._l==n&&(r._l=u),r[h]--}return!!n},forEach:function(e){v(this,t);for(var r,n=o(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!y(v(this,t),e)}}),f&&n(l.prototype,"size",{get:function(){return v(this,t)[h]}}),l},def:function(e,t,r){var n,a,u=y(e,t);return u?u.v=r:(e._l=u={i:a=p(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=u),n&&(n.n=u),e[h]++,"F"!==a&&(e._i[a]=u)),e},getEntry:y,setStrong:function(e,t,r){c(e,t,(function(e,r){this._t=v(e,t),this._k=r,this._l=void 0}),(function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?l(0,"keys"==t?r.k:"values"==t?r.v:[r.k,r.v]):(e._t=void 0,l(1))}),r?"entries":"values",!r,!0),d(t)}}},function(e,t,r){"use strict";var n=r(14),a=r(12),u=r(50),o=r(29),i=r(26),s=r(73),c=r(45),l=r(71),d=r(17),f=r(43),p=r(21).f,v=r(206)(0),h=r(19);e.exports=function(e,t,r,y,g,m){var _=n[e],b=_,T=g?"set":"add",I=b&&b.prototype,E={};return h&&"function"==typeof b&&(m||I.forEach&&!o((function(){(new b).entries().next()})))?(b=t((function(t,r){l(t,b,e,"_c"),t._c=new _,null!=r&&c(r,g,t[T],t)})),v("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),(function(e){var t="add"==e||"set"==e;e in I&&(!m||"clear"!=e)&&i(b.prototype,e,(function(r,n){if(l(this,b,e),!t&&m&&!d(r))return"get"==e&&void 0;var a=this._c[e](0===r?0:r,n);return t?this:a}))})),m||p(b.prototype,"size",{get:function(){return this._c.size}})):(b=y.getConstructor(t,e,g,T),s(b.prototype,r),u.NEED=!0),f(b,e),E[e]=b,a(a.G+a.W+a.F,E),m||y.setStrong(b,e,g),b}},function(e,t,r){var n=r(24),a=r(67),u=r(32),o=r(53),i=r(207);e.exports=function(e,t){var r=1==e,s=2==e,c=3==e,l=4==e,d=6==e,f=5==e||d,p=t||i;return function(t,i,v){for(var h,y,g=u(t),m=a(g),_=n(i,v,3),b=o(m.length),T=0,I=r?p(t,b):s?p(t,0):void 0;b>T;T++)if((f||T in m)&&(y=_(h=m[T],T,g),e))if(r)I[T]=y;else if(y)switch(e){case 3:return!0;case 5:return h;case 6:return T;case 2:I.push(h)}else if(l)return!1;return d?-1:c||l?l:I}}},function(e,t,r){var n=r(208);e.exports=function(e,t){return new(n(e))(t)}},function(e,t,r){var n=r(17),a=r(108),u=r(13)("species");e.exports=function(e){var t;return a(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!a(t.prototype)||(t=void 0),n(t)&&null===(t=t[u])&&(t=void 0)),void 0===t?Array:t}},function(e,t,r){var n=r(12);n(n.P+n.R,"Set",{toJSON:r(210)("Set")})},function(e,t,r){var n=r(44),a=r(211);e.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return a(this)}}},function(e,t,r){var n=r(45);e.exports=function(e,t){var r=[];return n(e,!1,r.push,r,t),r}},function(e,t,r){r(213)("Set")},function(e,t,r){"use strict";var n=r(12);e.exports=function(e){n(n.S,e,{of:function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,r){r(215)("Set")},function(e,t,r){"use strict";var n=r(12),a=r(40),u=r(24),o=r(45);e.exports=function(e){n(n.S,e,{from:function(e){var t,r,n,i,s=arguments[1];return a(this),(t=void 0!==s)&&a(s),null==e?new this:(r=[],t?(n=0,i=u(s,arguments[2],2),o(e,!1,(function(e){r.push(i(e,n++))}))):o(e,!1,r.push,r),new this(r))}})}},,,,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={adGroupId:"",actors:[],adult:!1,anchors:[],image:{},broadcastDate:"",castEnabled:!0,channelId:0,channelName:"",chapter:0,contentId:"",description:"",directors:[],disney:!1,downladable:!1,drmProtected:!1,duration:0,episodeNo:0,fox:!1,freemium:!1,genre:"",highlight:!1,lang:"en",live:!1,matchId:0,premium:!1,publishDate:"",recommended:!0,replay:!1,seasonId:0,seasonName:"",seasonNo:0,showId:0,siMatchId:0,showName:"",supportSimulcast:!0,tags:[],title:"",engTitle:""};n=r(0).utils.baseUtils.getNewObjectCopy(n),t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.baseWatchPageModel=void 0;var n=r(0).utils.baseUtils,a={apiUri:"",canPlay:!0,contentDetail:{},description:"",errorCodeForPlayback:0,id:0,needLayout:!0,pageType:"",playbackURL:"",seoData:{desc:"",h1:"",metatags:[""],title:""},trays:{items:[],nextOffsetURL:"",page:0,pageSize:0,totalPages:0,totalResults:0}};t.baseWatchPageModel=a=n.getNewObjectCopy(a),t.baseWatchPageModel=a},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(r(11)),u=n(r(3)),o=n(r(1)),i=n(r(4)),s=n(r(5)),c=n(r(38)),l=n(r(231));t.default=new(function(e){function t(){(0,o.default)(this,t);var e=(0,i.default)(this,(t.__proto__||(0,u.default)(t)).call(this));return e.apiConfigs=[].concat((0,a.default)(l.default),(0,a.default)(e.cmsConfigs||[])),e._defaultOptions={appVersion:"5.0.40"},e}return(0,s.default)(t,e),t}(c.default))(l.default)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(0)),a=r(38),u=[{endPoint:n.default.constants.CMS_GET_ASSETS,apis:{getAllAssets:{route:"/{assetType}/list?{apiQueryString}"},searchAsset:{route:"/{assetType}/search?{apiQueryString}"},getEpisodeDetails:{route:"/episode/detail?{apiQueryString}"},getShowDetails:{route:"/show/detail?{apiQueryString}"},getMovieDetails:{route:"/movie/detail?{apiQueryString}"},getNewsClipDetails:{route:"/content/detail?{apiQueryString}"},getTrayFromId:{route:"/tray/find?{apiQueryString}"},getSeasonsData:{route:"/season/detail?{apiQueryString}"},getTournamentData:{route:"/page/{seriesId}?{apiQueryString}"},getSportClipDetails:{route:"/match/detail?{apiQueryString}"}}}];u.concat(a.commonApiList),t.default=u},function(e,t,r){var n=r(9),a=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return a.stringify.apply(a,arguments)}},function(e,t,r){e.exports={default:r(234),__esModule:!0}},function(e,t,r){r(235),e.exports=r(9).Object.values},function(e,t,r){var n=r(12),a=r(236)(!1);n(n.S,"Object",{values:function(e){return a(e)}})},function(e,t,r){var n=r(19),a=r(35),u=r(27),o=r(46).f;e.exports=function(e){return function(t){for(var r,i=u(t),s=a(i),c=s.length,l=0,d=[];c>l;)r=s[l++],n&&!o.call(i,r)||d.push(e?[r,i[r]]:i[r]);return d}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.default=[{endPoint:function(e){return e&&e.__esModule?e:{default:e}}(n).default.constants.PERSONA_PLATFORM,apis:{continueWatchingTray:{route:"/v1/users/{userId}/preferences/continue-watching?{apiQueryString}"},lpv:{route:"/v1/users/{userId}/preferences?{apiQueryString}"},postLpv:{route:"/users/{userId}/preferences?{apiQueryString}"},getPersonaTray:{route:"/{relativePath}"},getWatchNext:{route:"/v1/users/{userId}/trays/watch-next?{apiQueryString}"},watchlist:{route:"/v1/users/{userId}/trays/watchlist?{apiQueryString}"},watchlistItem:{route:"/v1/users/{userId}/trays/watchlist/{contentId}?{apiQueryString}"}}}]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(r(49)),u=n(r(23)),o=n(r(6)),i=n(r(20)),s=n(r(1)),c=n(r(2)),l=r(0),d=r(16),f=n(r(51)),p=r(58),v=new f.default,h=l.utils.baseUtils;t.default=function(){function e(){var t=this;(0,s.default)(this,e),this.removeCWItemRequest=function(e){if(t.isValidRequest(e)){var r=e.contentIds,n=void 0===r?[]:r;if(n.length)return e.contentIds=n.map((function(e){return e+""})),e}},this.fetchCWTrayResponse=function(e){var r=e.request,n=void 0===r?{}:r,a=e.response,u=void 0===a?{}:a,o=n.contentIds,s=n.showContentId;if(!u.status||!u.data||!u.data.items)return console.error("Failed to parse Continue watching tray from persona: ",u),{data:{items:{},reqContentIds:o,reqShowContentId:s},status:!0};var c={},l=[];return u.data.items.forEach((function(e){e.timestamp*=1e3,e.showContentId=e.show_content_id,delete e.show_id,delete e.show_content_id,c[e.item_id]=e,l.push(e.item_id)})),(0,i.default)(u.data,{items:c,updatedAt:1e3*u.data.updated_at||t._getDefaultCWExpiryTime(),orderedContentIds:l,reqContentIds:o,reqShowContentId:s}),u},this.getLpvHeaderResponse=function(e){var r=e.languages;return(void 0===r?[]:r).sort(t._sortBasedOnCode).map(t._getLangCode).join("~")},this._sortBasedOnCode=function(e,t){var r=e.code,n=t.code;return r===n?0:n>r?-1:1},this._getLangCode=function(e){return e.code+"="+e.level},this._getFilledItems=function(e,t){return e.filter((function(e){return!!t[e]})).map((function(e){return v.addMetaProperties(t[e])}))},this.getWatchNextResponse=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};try{var r=e.multiContentMap,n=e.outputNameValues,a=void 0===n?[]:n,u=e.data,i=void 0===u?{}:u,s=i.items,c=void 0===s?[]:s,l=i.tray_source,f=c[0],p=f&&r[f]||{};t=(0,o.default)({},p,{contentTitle:p.title,language:p.lang,outputNameValues:a,source:d.apiSource.PERSONA,cardLogic:"watch_next_"+l})}catch(r){console.error("Error in processing the response of getWatchNext : ",e,r),t={status:!1,error:r}}return t},this.fetchPersonaTrayResponse=function(e){var r=e.request,n=e.resp,a=h.getNewObjectCopy(d.defaultTrayResponse);if(!(0,u.default)(n).length)return a;var o=n.data,s=void 0===o?{}:o,c=s.items,l=void 0===c?{}:c,f=s.itemids,p=void 0===f?[]:f,v=t._getFilledItems(p,l);return(0,i.default)(a.assets,{items:v,nextOffsetURL:s.next_page_url}),a.title=n.title||r.title,a},this.getWatchlistResponse=function(e){var r=e.request,n=void 0===r?{}:r,a=e.response,u=void 0===a?{}:a,o=h.getNewObjectCopy(d.defaultTrayResponse),s=n.title,c=void 0===s?"Watchlist":s,l=n.userId,f=u.data,p=void 0===f?{}:f,v=u.status,y=void 0===v||v,g=p.itemids,m=void 0===g?[]:g,_=p.items,b=void 0===_?{}:_,T=p.next_page_url,I=t._getFilledItems(m,b);return(0,i.default)(o.assets,{items:I,itemids:m,page:1,pageSize:I.length,totalPages:1,totalResults:I.length}),(0,i.default)(o,{title:c,userId:l,cardLogic:"WATCHLIST_TRAY",status:y,haveNextPage:!!T}),o}}return(0,c.default)(e,[{key:"isValidRequest",value:function(e){return"object"===(void 0===e?"undefined":(0,a.default)(e))&&null!=e&&!!e.userId}},{key:"updateLocalCWDataRequest",value:function(e){if(e){var t=e.userId,r=e.cwTray;if(t&&Array.isArray(r)){var n={};return r.forEach((function(e){var t=e.item_id;n[t]={w:e.watched,t:e.timestamp};var r=n[t];e.tag&&(r.tag=e.tag),e.showContentId&&(r.scId=e.showContentId),e.removed&&(r.r=1)})),{userId:t,cwTray:n}}}}},{key:"updateCWTrayItemRequest",value:function(e){if("object"===(void 0===e?"undefined":(0,a.default)(e))&&null!==e){var t=e.contentId,r=e.percentage,n=e.userId;if(t&&void 0!==r&&n)return e}}},{key:"_getDefaultCWExpiryTime",value:function(){return new Date(Date.now()-2592e6).getTime()}},{key:"fetchLocalCWTrayResponse",value:function(e){if("object"!==(void 0===e?"undefined":(0,a.default)(e))||null===e)return{};var t={};return(0,u.default)(e).forEach((function(r){var n=e[r];n.r||(t[r]={item_id:r,watched:n.w,timestamp:n.t,tag:n.tag,showContentId:n.scId})})),t}},{key:"getContentDetailsResponse",value:function(e){return e&&e.results&&e.results.map?e.results.map:{}}},{key:"getContinueWatchingTrayResponse",value:function(e){var t=e.data,r=e.token,n=e.offset,a=t;return t?(n&&(a=t.slice(n)),{assets:{items:a,nextOffsetURL:"",page:1,pageSize:t.length,totalPages:1,totalResults:a.length,token:r}}):p.baseTrayModel}}]),e}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorageInterface=t.NetworkInterface=void 0;var a=n(r(240)),u=n(r(242));t.default={NetworkInterface:a.default,LocalStorageInterface:u.default},t.NetworkInterface=a.default,t.LocalStorageInterface=u.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(r(23)),u=n(r(6)),o=n(r(7)),i=n(r(10)),s=n(r(1)),c=n(r(2)),l=r(0),d=n(l),f=n(r(120)),p=n(r(121)),v=n(r(122)),h=r(123),y=r(16),g=new f.default,m=d.default.config,_=l.utils.baseUtils;t.default=new(function(){function e(){(0,s.default)(this,e),this.apiRegistry=p.default}return(0,c.default)(e,[{key:"fetchLpv",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,i.default)(o.default.mark((function e(t){var r,n,a,u,i,s,c,d,f;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.userId,n=t.config,a=void 0===n?{}:n,u=t.userToken,i={},s={pathVars:{userId:r}},e.prev=3,c=g.getAuthToken({userToken:u}),d={headers:{hotstarauth:c},expireAt:-1},a.PERSONA_API_TIMEOUT&&(d.apiTimeOut=a.PERSONA_API_TIMEOUT),f=this.apiRegistry.getPath(s,"lpv"),e.next=10,l.HttpLib.get(f,d);case 10:i=e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.warn("Error while fetching LPV",e.t0);case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}}),e,this,[[3,13]])})));return e}()},{key:"fetchCwTray",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,i.default)(o.default.mark((function e(t){var r,n,i,s,c,d,f,p,h,m,_,b,T,I,E,R;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.userId,n=t.contentIds,i=void 0===n?[]:n,s=t.config,c=void 0===s?{}:s,d=t.showContentId,f=t.size,p=void 0===f?y.PAGINATION_SIZE:f,h=t.token,m=t.userToken,_={},b={pathVars:{userId:r}},T={},e.prev=5,I=(0,u.default)({},g._getRequestHeaders((0,u.default)({},c,{userToken:m})),v.default.getLpvAndSubsStatusObj(r,c)),E={headers:I,skipCache:!0},c.PERSONA_API_TIMEOUT&&(E.apiTimeOut=c.PERSONA_API_TIMEOUT),i.length>0&&(T.item_id=i.join(",")),d&&(T.show_content_id=d),p&&(T.size=p),h&&(T.token=h),(0,a.default)(T).length>0&&(b.querystring=T),R=this.apiRegistry.getPath(b,"continueWatchingTray"),e.next=17,l.HttpLib.get(R,E);case 17:_=e.sent,e.next=23;break;case 20:e.prev=20,e.t0=e.catch(5),console.error("Error while fetching Continue watching tray from persona",e.t0);case 23:return e.abrupt("return",_);case 24:case"end":return e.stop()}}),e,this,[[5,20]])})));return e}()},{key:"fetchWatchNext",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,i.default)(o.default.mark((function e(t){var r,n,a,u,i,s,c,d,f,p;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.contentId,n=t.userId,a=t.numberLimit,u=void 0===a?1:a,i=t.userToken,s={},c={},d=g._getRequestHeaders({userToken:i}),f={headers:d},c.pathVars={userId:n},c.querystring={item_id:r,limit:u},p=this.apiRegistry.getPath(c,"getWatchNext"),e.next=10,l.HttpLib.get(p,f);case 10:if((s=e.sent).status){e.next=13;break}throw Error("Unable to fetch Watch next as API returns status as False.");case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e,this)})));return e}()},{key:"fetchPersonaTrayData",value:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,i.default)(o.default.mark((function e(t,r){var n,a,i,s,c,d,f,p,h,y,b,T,I,E,R,C,O,P;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},a=t.assets,i=void 0===a?{}:a,s=t.userId,c=t.config,d=void 0===c?{}:c,f=t.userToken,p=i.items,h=void 0===p?[]:p,y=void 0,s){e.next=6;break}throw Error("Failed to get persona tray due to the absence of userId");case 6:if(h.length||t.fetchMoreData){e.next=11;break}b={P_ID:s,SIZE:t.size||20},y=v.default.getPathFromMacrosHash(t.addIdentifier,b),e.next=16;break;case 11:if(!t.fetchMoreData||!i.nextOffsetURL){e.next=15;break}y=i.nextOffsetURL,e.next=16;break;case 15:return e.abrupt("return",n);case 16:return T=(0,u.default)({},g._getRequestHeaders((0,u.default)({},d,{userToken:f})),v.default.getLpvAndSubsStatusObj(s,d)),I={headers:T},d.PERSONA_API_TIMEOUT&&(I.apiTimeOut=d.PERSONA_API_TIMEOUT),(E={}).pathVars={relativePath:y},R=m.initConfig.getConfig(),C=R.apiQueryString,O=void 0===C?"":C,E.querystring=_.toQueryStringObject(O),P=this.apiRegistry.getPath(E,"getPersonaTray"),e.next=26,l.HttpLib.get(P,I);case 26:if((n=e.sent).status){e.next=29;break}throw Error("Unable to fetch Watch next as API returns status as False.");case 29:return e.abrupt("return",n);case 30:case"end":return e.stop()}}),e,this)})));return e}()},{key:"fetchWatchlist",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,i.default)(o.default.mark((function e(t){var r,n,a,i,s,c,d,f,p,h,y,m,_,b,T,I,E;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.userId,n=t.config,a=void 0===n?{}:n,i=t.userToken,s=t.disableMeta,c=void 0!==s&&s,d=t.limit,f=void 0===d?50:d,p=t.offset,h=void 0===p?0:p,y=t.size,m=void 0===y?0:y,_={},b={},T=(0,u.default)({},g._getRequestHeaders({userToken:i}),v.default.getLpvAndSubsStatusObj(r,a)),I={headers:T,skipCache:!0},b.pathVars={userId:r},b.querystring={meta:!c,limit:m||f,offset:h},E=this.apiRegistry.getPath(b,"watchlist"),e.next=10,l.HttpLib.get(E,I);case 10:return _=e.sent,e.abrupt("return",_);case 12:case"end":return e.stop()}}),e,this)})));return e}()},{key:"watchlistItemOperation",value:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,i.default)(o.default.mark((function e(t,r){var n,a,i,s,c,d,f,p;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.userId,a=t.contentId,i=t.userToken,s=(0,u.default)({},g._getRequestHeaders({userToken:i}),v.default.getLpvAndSubsStatusObj(n,t)),c={headers:s},(d={}).pathVars={userId:n,contentId:a},f=this.apiRegistry.getPath(d,"watchlistItem"),p={},e.t0=r,e.next=e.t0===h.WL_OPERATIONS.ADD?10:e.t0===h.WL_OPERATIONS.DELETE?14:e.t0===h.WL_OPERATIONS.READ?18:22;break;case 10:return e.next=12,l.HttpLib.put(f,c);case 12:return p=e.sent,e.abrupt("break",22);case 14:return e.next=16,l.HttpLib.delete(f,c);case 16:return p=e.sent,e.abrupt("break",22);case 18:return e.next=20,l.HttpLib.get(f,c);case 20:return p=e.sent,e.abrupt("break",22);case 22:return e.abrupt("return",p);case 23:case"end":return e.stop()}}),e,this)})));return e}()}]),e}())},function(e,t,r){var n;n=function(e){return function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var a in e)t.d(n,a,function(t){return e[t]}.bind(null,a));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=7)}([function(e,t,r){"use strict";r.d(t,"d",(function(){return a})),r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return o}));var n={SHOW:"SHOW",EPISODE:"EPISODE",SPORT:"SPORT"},a={MUL_LANG_PREF_KEY:"multiLangPrefs",LPV_KEY:"lpv-data",MASTER_P13N_KEY:"p13n"},u={PROD:"PROD_ENV",QA:"QA_ENV",PP:"PP_ENV",LOAD:"LOAD_ENV",STAG:"STAG_ENV"},o="a0aa8bcf9dd58ec6e3b57d9b4e5a0080b1450df7436cfa22dd5cffdfea8e1252"},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t,r,n,a,u,o){try{var i=e[u](o),s=i.value}catch(e){return void r(e)}i.done?t(s):Promise.resolve(s).then(n,a)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){function o(e){u(s,n,a,o,i,"next",e)}function i(e){u(s,n,a,o,i,"throw",e)}var s=e.apply(t,r);o(void 0)}))}}function i(e,t){for(var r=0;t.length>r;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=r(0),c=r(4),l=r.n(c),d=s.d.LPV_KEY,f=s.d.MASTER_P13N_KEY,p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,u,s,c,p,v,h;return t=e,(r=[{key:"p13nSetModule",value:(h=o(regeneratorRuntime.mark((function e(t){var r,u,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.reqModule,u=void 0===r?"":r,i=t.reqData,s=void 0===i?{}:i,e.abrupt("return",new Promise(function(){var e=o(regeneratorRuntime.mark((function e(t,r){var o,i,c,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"undefined"==typeof window&&r(Error("p13n calls should not be made on server side")),o={},i=window.localStorage;try{u&&(s||"object"===a(s))||t(!1),c=s,l=JSON.parse(i.getItem(f))||{},(d=l[u])&&Object.keys(d).length>0?(Object.assign(d,c),o=n({},u,d)):o=n({},u,c),Object.assign(o,l),i.setItem(f,JSON.stringify(o)),i.getItem(f),t(!0)}catch(e){t(!1)}t(!0);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)}))),function(e){return h.apply(this,arguments)})},{key:"p13nSetItem",value:(v=o(regeneratorRuntime.mark((function e(t){var r,u,i,s,c,d,p=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.reqModule,u=void 0===r?"":r,i=t.reqKey,s=void 0===i?"":i,c=t.reqData,d=void 0===c?{}:c,e.abrupt("return",new Promise(function(){var e=o(regeneratorRuntime.mark((function e(t,r){var o,i,c,v,h,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"undefined"==typeof window&&r(Error("p13n calls should not be made on server side")),o={},i=window.localStorage,e.prev=3,u&&s&&(d||"object"===a(d))||t(!1),(c=d).timestamp=(new Date).getTime(),e.next=9,p.p13nGetItem({reqModule:u});case 9:(v=e.sent)&&Object.keys(v).length>0?(v[s]=c,o=n({},u,v)):o=n({},u,n({},s,c)),(h=JSON.parse(i.getItem(f)))||(h={}),y=l()(h,{$merge:o}),i.setItem(f,JSON.stringify(y)),i.getItem(f),t(!0),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(3),console.error("p13nSetItem Failed : ",e.t0),t(!1);case 23:t(!0);case 24:case"end":return e.stop()}}),e,null,[[3,19]])})));return function(t,r){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)}))),function(e){return v.apply(this,arguments)})},{key:"p13nGetItem",value:(p=o(regeneratorRuntime.mark((function e(t){var r,n,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.reqModule,n=void 0===r?"":r,a=t.reqKey,u=void 0===a?"":a,e.abrupt("return",new Promise((function(e,t){"undefined"==typeof window&&t(Error("p13n calls should not be made on server side"));var r=window.localStorage,a={};try{n||u||e(a);var o=JSON.parse(r.getItem(f));o||e(a),u||e(o[n]),a=o[n][u]}catch(e){}e(a)})));case 2:case"end":return e.stop()}}),e)}))),function(e){return p.apply(this,arguments)})},{key:"p13nGetItem_sync",value:function(e){var t=e.reqModule,r=void 0===t?"":t,n=e.reqKey,a=void 0===n?"":n;if("undefined"==typeof window)return{};var u=window.localStorage,o={};try{if(!r&&!a)return o;var i=JSON.parse(u.getItem(f));if(!i)return o;if(!a)return i[r];if(!i[r])return o;o=i[r][a]}catch(e){console.error("p13nGetItem_sync : ",e)}return o}},{key:"p13nRemoveItem",value:(c=o(regeneratorRuntime.mark((function e(t){var r,n,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.reqModule,n=void 0===r?"":r,a=t.reqKey,u=void 0===a?"":a,e.abrupt("return",new Promise((function(e,t){"undefined"==typeof window&&t(Error("p13n calls should not be made on server side"));var r=window.localStorage;n||u||e(!1);try{var a=JSON.parse(r.getItem(f));u?(delete a[n][u],r.setItem(f,JSON.stringify(a))):(delete a[n],r.setItem(f,JSON.stringify(a)))}catch(t){e(!1)}e(!0)})));case 2:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)})},{key:"getLpv",value:(s=o(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.userId,n={},e.prev=2,e.next=5,this.p13nGetItem({reqModule:d,reqKey:r});case 5:n=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error("Failed to get lpv data from localStorage :",e.t0);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(e){return s.apply(this,arguments)})},{key:"getLpv_sync",value:function(e){var t,r=e.userId;try{t=this.p13nGetItem_sync({reqModule:d,reqKey:r})}catch(e){console.error("Failed to get lpv data from localStorage :",e)}return t}},{key:"setLpv",value:(u=o(regeneratorRuntime.mark((function e(t){var r,n,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.userId,n=t.lpvData,a=void 0===n?{}:n,u=!1,e.prev=2,e.next=5,this.p13nSetItem({reqModule:d,reqKey:r,reqData:a});case 5:u=!!e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error("Failed to set LPV data : ",e.t0);case 11:return u||console.error("Setting Data in LPV is failed",r,a),e.abrupt("return",u);case 13:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(e){return u.apply(this,arguments)})}])&&i(t.prototype,r),e}();t.a=new p},function(t,r){t.exports=e},,function(e,t,r){"use strict";(function(r){function n(e){return"object"!=typeof e||"toString"in e?e:Object.prototype.toString.call(e).slice(8,-1)}function a(e,t){if(!e){if(d)throw Error("Invariant failed");throw Error(t())}}function u(e){return v.call(e).slice(8,-1)}function o(e){return Array.isArray(e)?h(e.constructor(e.length),e):"Map"===u(e)?new Map(e):"Set"===u(e)?new Set(e):e&&"object"==typeof e?h(Object.create(Object.getPrototypeOf(e)),e):e}function i(e,t,r){a(Array.isArray(e),(function(){return"update(): expected target of "+n(r)+" to be an array; got "+n(e)+"."})),s(t[r],r)}function s(e,t){a(Array.isArray(e),(function(){return"update(): expected spec of "+n(t)+" to be an array; got "+n(e)+". Did you forget to wrap your parameter in an array?"}))}function c(e){a(Array.isArray(e),(function(){return"update(): expected spec of $splice to be an array of arrays; got "+n(e)+". Did you forget to wrap your parameters in an array?"}))}function l(e,t){var r=u(e);a("Map"===r||"Set"===r,(function(){return"update(): "+n(t)+" expects a target of type Set or Map; got "+n(r)}))}Object.defineProperty(t,"__esModule",{value:!0});var d="object"==typeof r&&!0;t.invariant=a;var f=Object.prototype.hasOwnProperty,p=Array.prototype.splice,v=Object.prototype.toString,h=Object.assign||function(e,t){return y(t).forEach((function(r){f.call(t,r)&&(e[r]=t[r])})),e},y="function"==typeof Object.getOwnPropertySymbols?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)},g=function(){function e(){this.commands=h({},m),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,t){return e===t},this.update.newContext=function(){return(new e).update}}return Object.defineProperty(e.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),e.prototype.extend=function(e,t){this.commands[e]=t},e.prototype.update=function(e,t){var r=this,n="function"==typeof t?{$apply:t}:t;Array.isArray(e)&&Array.isArray(n)||a(!Array.isArray(n),(function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."})),a("object"==typeof n&&null!==n,(function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: "+Object.keys(r.commands).join(", ")+"."}));var i=e;return y(n).forEach((function(t){if(f.call(r.commands,t)){var a=e===i;i=r.commands[t](n[t],i,n,e),a&&r.isEquals(i,e)&&(i=e)}else{var s="Map"===u(e)?r.update(e.get(t),n[t]):r.update(e[t],n[t]),c="Map"===u(i)?i.get(t):i[t];r.isEquals(s,c)&&(void 0!==s||f.call(e,t))||(i===e&&(i=o(e)),"Map"===u(i)?i.set(t,s):i[t]=s)}})),i},e}();t.Context=g;var m={$push:function(e,t,r){return i(t,r,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,r){return i(t,r,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,r,u){return function(e,t){a(Array.isArray(e),(function(){return"Expected $splice target to be an array; got "+n(e)})),c(t.$splice)}(t,r),e.forEach((function(e){c(e),t===u&&e.length&&(t=o(u)),p.apply(t,e)})),t},$set:function(e,t,r){return function(e){a(1===Object.keys(e).length,(function(){return"Cannot have more than one key in an object with $set"}))}(r),e},$toggle:function(e,t){s(e,"$toggle");var r=e.length?o(t):t;return e.forEach((function(e){r[e]=!t[e]})),r},$unset:function(e,t,r,n){return s(e,"$unset"),e.forEach((function(e){Object.hasOwnProperty.call(t,e)&&(t===n&&(t=o(n)),delete t[e])})),t},$add:function(e,t,r,n){return l(t,"$add"),s(e,"$add"),e.forEach("Map"===u(t)?function(e){var r=e[0],a=e[1];t===n&&t.get(r)!==a&&(t=o(n)),t.set(r,a)}:function(e){t!==n||t.has(e)||(t=o(n)),t.add(e)}),t},$remove:function(e,t,r,n){return l(t,"$remove"),s(e,"$remove"),e.forEach((function(e){t===n&&t.has(e)&&(t=o(n)),t.delete(e)})),t},$merge:function(e,t,r,u){var i,s;return i=t,a((s=e)&&"object"==typeof s,(function(){return"update(): $merge expects a spec of type 'object'; got "+n(s)})),a(i&&"object"==typeof i,(function(){return"update(): $merge expects a target of type 'object'; got "+n(i)})),y(e).forEach((function(r){e[r]!==t[r]&&(t===u&&(t=o(u)),t[r]=e[r])})),t},$apply:function(e,t){var r;return a("function"==typeof(r=e),(function(){return"update(): expected spec of $apply to be a function; got "+n(r)+"."})),e(t)}},_=new g;t.isEquals=_.update.isEquals,t.extend=_.extend,t.default=_.update,t.default.default=e.exports=h(t.default,t)}).call(this,r(6))},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){for(var r=0;t.length>r;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u,o,i=r(2),s=r.n(i),c=r(0),l=[{endPoint:"PERSONA",apis:{syncWithRemote:{route:"/v1/users/{pId}/preferences/language-selection"},lpv:{route:"/v1/users/{pId}/preferences"}}}],d={PERSONA:(u={},n(u,c.b.LOAD,"https://persona-load.hotstar-labs.com"),n(u,c.b.PP,"https://persona-pp.hotstar-labs.com"),n(u,c.b.QA,"https://persona-pp.hotstar-labs.com"),n(u,c.b.STAG,"https://persona.hotstar.com"),n(u,c.b.PROD,"https://persona.hotstar.com"),u)},f={getInstance:function(e,t){var r=e.environment,n=e.platformCode,a=e.countryCode,u=e.clientTimeOffSet,f=void 0===u?0:u,p=e.userToken;if(!t&&o)return o;if(!r)throw"Please pass the environment";if(!n)throw"Please pass the platformCode";if(!a)throw"Please pass the countryCode";return o&&!t||(o=function(e){function t(e){return{hotstarauth:o.getAuthToken(),"x-country-code":a,"x-platform-code":n,"X-HS-UserToken":e}}var r=e.environment,n=e.platformCode,a=e.countryCode,u=e.clientTimeOffSet,o=new i.AuthTokenGenerator({key:c.c,timeOffSet:u});return{getUrl:function(e){return i.BuildUrl.getUrl({environment:r,apiName:e.apiName,apiConfig:l,apiEndPoints:d,options:{pathVars:e.pathVars}})},getHeaders:t,getOptions:function(e){return{headers:t(e),skipCache:!0}},HttpLib:s.a}}({environment:r,platformCode:n,countryCode:a,clientTimeOffSet:f,userToken:p})),o}},p=function(){function e(t){var r=t.environment,n=t.platformCode,a=t.countryCode,u=t.clientTimeOffSet;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.environment=r,this.platformCode=n,this.countryCode=a,this.clientTimeOffSet=u}var t;return(t=[{key:"getNetworkService",value:function(){return this.networkService||(this.networkService=f.getInstance({environment:this.environment,platformCode:this.platformCode,countryCode:this.countryCode,clientTimeOffSet:this.clientTimeOffSet})),this.networkService}}])&&a(e.prototype,t),e}();t.a=p},function(e,t){function r(){throw Error("setTimeout has not been defined")}function n(){throw Error("clearTimeout has not been defined")}function a(e){if(c===setTimeout)return setTimeout(e,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function u(){v&&f&&(v=!1,f.length?p=f.concat(p):h=-1,p.length&&o())}function o(){if(!v){var e=a(u);v=!0;for(var t=p.length;t;){for(f=p,p=[];++h<t;)f&&f[h].run();h=-1,t=p.length}f=null,v=!1,function(e){if(l===clearTimeout)return clearTimeout(e);if((l===n||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}(e)}}function i(e,t){this.fun=e,this.array=t}function s(){}var c,l,d=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(e){c=r}try{l="function"==typeof clearTimeout?clearTimeout:n}catch(e){l=n}}();var f,p=[],v=!1,h=-1;d.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;arguments.length>r;r++)t[r-1]=arguments[r];p.push(new i(e,t)),1!==p.length||v||a(o)},i.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=s,d.addListener=s,d.once=s,d.off=s,d.removeListener=s,d.removeAllListeners=s,d.emit=s,d.prependListener=s,d.prependOnceListener=s,d.listeners=function(e){return[]},d.binding=function(e){throw Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,r,n,a,u,o){try{var i=e[u](o),s=i.value}catch(e){return void r(e)}i.done?t(s):Promise.resolve(s).then(n,a)}function u(e,t){for(var r=0;t.length>r;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var a=c(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.r(t);var l=r(5),d=r(1),f=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f.call(this,e)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(t,e);var r,n,s,c,l,f=i(t);return r=t,s=[{key:"getLPVForUser",value:function(e){return d.a.getLpv_sync({userId:e})}}],(n=[{key:"descSortLPVs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.sort((function(e,t){return t.score-e.score})),e}},{key:"processTopLPVTraits",value:function(e){e=this.descSortLPVs(e).filter((function(e){return(e.score=+e.score.toFixed(2))>0})).slice(0,3);var t={};return t.primary_language=e[0]?e[0].name:null,t.primary_lang_score=e[0]?e[0].score:null,t.secondary_language=e[1]?e[1].name:null,t.secondary_lang_score=e[1]?e[1].score:null,t.tertiary_language=e[2]?e[2].name:null,t.tertiary_lang_score=e[2]?e[2].score:null,t}},{key:"getTopLPVTraits",value:function(e){var t=d.a.getLpv_sync({userId:e});return t?t.topLPVs:{}}},{key:"getTopThreeLangsFromLPV",value:(c=regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.getLpv({userId:t});case 2:return r=(r=e.sent)||{},n=this.descSortLPVs(r.lpv),e.abrupt("return",n.slice(0,3).map((function(e){return(e||{}).name})).join(","));case 6:case"end":return e.stop()}}),e,this)})),l=function(){var e=this,t=arguments;return new Promise((function(r,n){function u(e){a(i,r,n,u,o,"next",e)}function o(e){a(i,r,n,u,o,"throw",e)}var i=c.apply(e,t);u(void 0)}))},function(e){return l.apply(this,arguments)})},{key:"fetch",value:function(e,t){var r=this,n=this.getNetworkService(),a=n.getUrl,u=n.getOptions;n.HttpLib.get(a({apiName:"lpv",pathVars:{pId:e}}),u(t)).then((function(t){t.data.topLPVs=r.processTopLPVTraits(t.data.lpv),d.a.setLpv({userId:e,lpvData:t.data})})).catch((function(e){return console.error("Error with sync remote API ",e)}))}}])&&u(r.prototype,n),s&&u(r,s),t}(l.a);t.default=f}])},e.exports=n(r(60))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(r(7)),u=n(r(119)),o=n(r(28)),i=n(r(6)),s=n(r(23)),c=n(r(49)),l=n(r(8)),d=n(r(10)),f=n(r(1)),p=n(r(2)),v=n(r(0)).default.constants,h=v.RUC_MASTER_KEY,y=v.LPV_KEY;t.default=new(function(){function e(){(0,f.default)(this,e)}return(0,p.default)(e,[{key:"rucSetModule",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(a.default.mark((function e(t){var r=this,n=t.reqModule,f=void 0===n?"":n,p=t.reqData,v=void 0===p?{}:p;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new l.default(function(){var e=(0,d.default)(a.default.mark((function e(t,n){var l,d,p,y,g;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window||n(Error("ruc calls should not be made on server side")),l={},d=window.localStorage;try{f&&(v||"object"===(void 0===v?"undefined":(0,c.default)(v)))||t(!1),p=v,y=JSON.parse(d.getItem(h))||{},(g=y[f])&&(0,s.default)(g).length>0?(g=(0,i.default)({},g,p),l=(0,i.default)({},y,(0,o.default)({},f,g))):l=(0,i.default)({},y,(0,o.default)({},f,p)),d.setItem(h,(0,u.default)(l)),d.getItem(h),t(!0)}catch(e){t(!1)}t(!0);case 5:case"end":return e.stop()}}),e,r)})));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e,this)})));return e}()},{key:"rucSetItem",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(a.default.mark((function e(t){var r=this,n=t.reqModule,f=void 0===n?"":n,p=t.reqKey,v=void 0===p?"":p,y=t.reqData,g=void 0===y?{}:y;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new l.default(function(){var e=(0,d.default)(a.default.mark((function e(t,n){var l,d,p,y,m;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window||n(Error("ruc calls should not be made on server side")),l={},d=window.localStorage,e.prev=3,f&&v&&(g||"object"===(void 0===g?"undefined":(0,c.default)(g)))||t(!1),(p=g).timestamp=(new Date).getTime(),e.next=9,r.rucGetItem({reqModule:f});case 9:y=e.sent,m=JSON.parse(d.getItem(h)),y&&(0,s.default)(y).length>0?(y[v]=p,l=(0,i.default)({},m,(0,o.default)({},f,y))):l=(0,i.default)({},m,(0,o.default)({},f,(0,o.default)({},v,p))),d.setItem(h,(0,u.default)(l)),d.getItem(h),t(!0),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),t(!1);case 20:t(!0);case 21:case"end":return e.stop()}}),e,r,[[3,17]])})));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e,this)})));return e}()},{key:"rucGetItem",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(a.default.mark((function e(t){var r=t.reqModule,n=void 0===r?"":r,u=t.reqKey,o=void 0===u?"":u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new l.default((function(e,t){window||t(Error("ruc calls should not be made on server side"));var r=window.localStorage,a={};try{n||o||e(a);var u=JSON.parse(r.getItem(h));o||e(u[n]),a=u[n][o]}catch(e){}e(a)})));case 1:case"end":return e.stop()}}),e,this)})));return e}()},{key:"rucRemoveItem",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(a.default.mark((function e(t){var r=t.reqModule,n=void 0===r?"":r,o=t.reqKey,i=void 0===o?"":o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new l.default((function(e,t){window||t(Error("ruc calls should not be made on server side"));var r=window.localStorage;n||i||e(!1);try{var a=JSON.parse(r.getItem(h));i?(delete a[n][i],r.setItem(h,(0,u.default)(a))):(delete a[n],r.setItem(h,(0,u.default)(a)))}catch(t){e(!1)}e(!0)})));case 1:case"end":return e.stop()}}),e,this)})));return e}()},{key:"getLpv",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(a.default.mark((function e(t){var r,n=t.userId;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,this.rucGetItem({reqModule:y,reqKey:n});case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("Failed to get lpv data from localStorage");case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e,this,[[1,7]])})));return e}()},{key:"setLpv",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(a.default.mark((function e(t){var r,n=t.userId,u=t.lpvData,o=void 0===u?{}:u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!1,e.prev=1,e.next=4,this.rucSetItem({reqModule:y,reqKey:n,reqData:o});case 4:r=!!e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:return r||console.error("Failed to set lpv data in local storage",n,o),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e,this,[[1,7]])})));return e}()}]),e}())},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{default:e}}(r(92));(0,r(0).registerOperations)("RUC",n.default)},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{default:e}}(r(245));(0,r(0).registerOperations)("UMSV2",n.default)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r,n,a){var u={};return Object.keys(n).forEach((function(e){u[e]=n[e]})),u.enumerable=!!u.enumerable,u.configurable=!!u.configurable,("value"in u||u.initializer)&&(u.writable=!0),u=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),u),a&&void 0!==u.initializer&&(u.value=u.initializer?u.initializer.call(a):void 0,u.initializer=void 0),void 0===u.initializer&&(Object.defineProperty(e,t,u),u=null),u}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.code=t.code||t.errorCode||e;var r=(0,A.default)(t,void 0,void 0,"RT");return I.default.reject(r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i,s,c,l=n(r(15)),d=n(r(48)),f=n(r(56)),p=n(r(6)),v=n(r(7)),h=n(r(10)),y=n(r(28)),g=n(r(3)),m=n(r(1)),_=n(r(2)),b=n(r(4)),T=n(r(5)),I=n(r(8)),E=r(0),R=n(E),C=n(r(246)),O=n(r(248)),P=n(r(36)),S=n(r(37)),k=r(16),w=n(r(250)),A=n(r(259)),x=n(r(114)),M=n(r(92)),D=r(124),N=r(59),L=r(90),U=n(r(260)),W=R.default.constants,q=new P.default,j=new C.default,H=R.default.HttpLib,V=R.default.adapters.responseAdapter,G=E.utils.baseUtils,Y=new M.default;t.default=(o=V(j.checkConcurrencyResponse),i=V(x.default.getVideoUrlV2Response,D.doNothingAdapter),s=V(x.default.getVideoUrlV2Response,D.doNothingAdapter),c=function(e){function t(){var e;(0,m.default)(this,t);var r=(0,b.default)(this,(t.__proto__||(0,g.default)(t)).call(this));return r.authKeys=(e={},(0,y.default)(e,W.PROD_ENV,"6AE6AC5CB24397A25CA15E04DF4F9885"),(0,y.default)(e,W.STAG_ENV,"6AE6AC5CB24397A25CA15E04DF4F9885"),(0,y.default)(e,W.QA_ENV,"6AE6AC5CB24397A25CA15E04DF4F9885"),(0,y.default)(e,W.PP_ENV,"6AE6AC5CB24397A25CA15E04DF4F9885"),(0,y.default)(e,W.LOAD_ENV,"6AE6AC5CB24397A25CA15E04DF4F9885"),e),r.apiRegistry=O.default,r}return(0,T.default)(t,e),(0,_.default)(t,[{key:"checkConcurrency",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,h.default)(v.default.mark((function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.v3RTInterceptor(this._checkConcurrency.bind(this),t,r).catch(u()));case 1:case"end":return e.stop()}}),e,this)})));return e}()},{key:"removeConcurrency",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,h.default)(v.default.mark((function e(t){return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.v3RTInterceptor(this._removeConcurrency.bind(this),t).catch(u()));case 1:case"end":return e.stop()}}),e,this)})));return e}()},{key:"_checkConcurrency",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,h.default)(v.default.mark((function e(t){var r,n,a,u,o,i,s,c,l;return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},n={},a={},u=G.getNewObjectCopy(k.defaultIsAllowPlayBackResponse),o="",e.prev=5,t.isPremium&&t.userId){e.next=8;break}return e.abrupt("return",I.default.resolve(u));case 8:return a.userId=t.userId,a.deviceId=t.deviceId,n.pathVars=a,n.type="json",n.skipCache=!0,i=q.getAuthToken(),s={hotstarauth:i},n.headers=s,c=this.apiRegistry.getPath(n,"checkConcurrency"),o=c,e.next=20,H.get(c,n);case 20:return r=e.sent,e.abrupt("return",r);case 24:return e.prev=24,e.t0=e.catch(5),l=(0,A.default)(e.t0,o,n,"CC"),e.abrupt("return",I.default.resolve(l));case 28:case"end":return e.stop()}}),e,this,[[5,24]])})));return e}()},{key:"_removeConcurrency",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,h.default)(v.default.mark((function e(t){var r,n,a,u,o,i,s;return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},n={},a={},u=G.getNewObjectCopy(k.defaultIsAllowPlayBackResponse),e.prev=4,t.isPremium){e.next=7;break}return e.abrupt("return",I.default.resolve(u));case 7:return a.userId=t.userId,a.deviceId=t.deviceId,n.pathVars=a,n.type="json",n.skipCache=!0,o=q.getAuthToken(),i={hotstarauth:o},n.headers=i,s=this.apiRegistry.getPath(n,"checkConcurrency"),e.next=18,H.delete(s,n);case 18:return r=e.sent,e.abrupt("return",r);case 22:return e.prev=22,e.t0=e.catch(4),e.abrupt("return",I.default.resolve(e.t0));case 25:case"end":return e.stop()}}),e,this,[[4,22]])})));return e}()},{key:"getCompositePlaybackUrlV2",value:function(e,t){var r=t||{deviceIdPath:"device.deviceId"};return e.v3RTInterceptor(this._getCompositePlaybackUrlV2.bind(this),e,r).catch(u())}},{key:"getCompositePlaybackUrl",value:function(e,t){var r=t||{deviceIdPath:"device.deviceId"};return e.v3RTInterceptor(this._getCompositePlaybackUrl.bind(this),e,r).catch(u())}},{key:"_getCompositePlaybackUrlV2",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,h.default)(v.default.mark((function e(t){var r,n,a,u,o,i,s,c,l,d,f,h,y,g,m,_,b,T,C,O,P,S,k,x,M,D,L,U,W,j,V,G,Y;return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",n=t.reqHeaders,a=void 0===n?{}:n,u=t.reqConfig,o=void 0===u?{}:u,i=t.apiVersion,s=void 0===i?"v2":i,c=(0,p.default)({},a),e.prev=3,l={},d={},f={},h=t.content,y=t.device,g=t.userId,m=t.fingerPrint,_=h.contentId,b=R.default.config.initConfig.getConfig()||{},T=b.country,C="getCompositePlaybackUrl",d.contentId=_,d.apiVersion=s,l["device-id"]=encodeURIComponent(y.deviceId),l["desired-config"]=(0,N.generateTagsString)(t.tags,"|"),l["os-name"]=encodeURIComponent(y.osName),l["os-version"]=y.osVersion,c.hotstarauth=q.getAuthToken(),c["X-HS-UserToken"]=g,c["X-HS-Platform"]=y.client,c["X-HS-AppVersion"]=y.clientVersion,c["X-Request-Id"]=t.requestId,c["X-Country-Code"]=T,m&&(c["X-HS-Tkey"]=m),O=this.apiRegistry.getPath({querystring:l,pathVars:d},C),r=O,P={headers:c,skipCache:!0,fetchParams:o,retries:[0,2e3,5e3,8e3,1e4,12e3,14e3,16e3]},e.prev=27,e.next=30,H.get(O,P);case 30:f=e.sent,e.next=43;break;case 33:if(e.prev=33,e.t0=e.catch(27),403===e.t0.httpStatus){e.next=37;break}throw e.t0;case 37:return e.next=39,(0,E.syncServerTime)();case 39:return P.headers.hotstarauth=q.getAuthToken(),e.next=42,H.get(O,P);case 42:f=e.sent;case 43:return S=(0,w.default)(f,"data",{}),k=S.playBackSets,x=void 0===k?[]:k,M=S.match,D=void 0!==M&&M,L=S.drmClass,U=void 0===L?"":L,W=S.videoMeta,j=void 0===W?{}:W,V=(0,w.default)(f,"additionalInfo"),G=f.responseHeaders,e.abrupt("return",{success:!0,isMatch:D,playbackSets:x,drmClass:U,additionalInfo:V,responseHeaders:G,videoMeta:j});case 49:return e.prev=49,e.t1=e.catch(3),Y=(0,A.default)(e.t1,r,{originalHeaders:c},"PC"),e.abrupt("return",I.default.reject(Y));case 53:case"end":return e.stop()}}),e,this,[[3,49],[27,33]])})));return e}()},{key:"_getCompositePlaybackUrl",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,h.default)(v.default.mark((function e(t){var r,n,a,u,o,i,s,c,l,d,f,h,y,g,m,_,b,T,C,O,P,S,k,x,M;return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",n=t.reqHeaders,a=void 0===n?{}:n,u=t.reqConfig,o=void 0===u?{}:u,i=void 0,e.prev=3,s={},c=R.default.config.initConfig.getConfig()||{},l=c.country,d="getCompositePlaybackUrl",i=(0,U.default)(t,(0,p.default)({},a,{hotstarauth:q.getAuthToken(),"X-Country-Code":l})),f=this.apiRegistry.getPath({querystring:i.queryParams,pathVars:i.pathVars},d),r=f,h={headers:i.headers,skipCache:!0,fetchParams:o,retries:[0,2e3,5e3,8e3,1e4,12e3,14e3,16e3],data:i.body},e.prev=11,e.next=14,H.post(f,h);case 14:s=e.sent,e.next=27;break;case 17:if(e.prev=17,e.t0=e.catch(11),403===e.t0.httpStatus){e.next=21;break}throw e.t0;case 21:return e.next=23,(0,E.syncServerTime)();case 23:return h.headers.hotstarauth=q.getAuthToken(),e.next=26,H.post(f,h);case 26:s=e.sent;case 27:return y=(0,w.default)(s,"data",{}),g=y.playback_sets,m=void 0===g?[]:g,_=y.match,b=void 0!==_&&_,T=y.drm_class,C=void 0===T?"":T,O=y.video_meta,P=void 0===O?{}:O,S=(0,w.default)(s,"additional_info"),k=s.responseHeaders,e.abrupt("return",{success:!0,isMatch:b,playbackSets:m,drmClass:C,additionalInfo:S,responseHeaders:k,videoMeta:P});case 33:return e.prev=33,e.t1=e.catch(3),x=this.extractErrorDetails(e.t1),M=(0,A.default)(x,r,{originalHeaders:i.headers},"PC"),e.abrupt("return",I.default.reject(M));case 38:case"end":return e.stop()}}),e,this,[[3,33],[11,17]])})));return e}()},{key:"extractErrorDetails",value:function(e){e.additional_info=e.additional_info||{};var t=e.error_code,r=e.error_details,n=void 0===r?[]:r,a=e.additional_info,u=(a=void 0===a?{}:a).devices,o=a.possible_actions,i=a.required_packs,s=a.entitlement_info,c=(0,f.default)(e,["error_code","error_details","additional_info"]),l=n.map((function(e){var t=e.header_name,r=e.param_name,n=(0,f.default)(e,["header_name","param_name"]);return(0,p.default)({},n,{headerName:t,paramName:r})}));return(0,p.default)({},c,{errorDetails:l,errorCode:t,additionalInfo:{requiredPacks:i,devices:u,possibleActions:o,entitlementInfo:s}})}},{key:"_getUserPlaybackConsent",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,h.default)(v.default.mark((function e(t){var r,n,a,u,o,i,s,c,l,d,f,h,y,g,m;return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0,n=void 0,e.prev=1,a=t.reqHeaders,u=void 0===a?{}:a,o=t.consentData,i=void 0===o?{}:o,s=t.content,c=t.device,l=t.userId,d=(0,p.default)({},u,(0,L.getConsentHeaders)({userId:l,device:c,request:t})),f={},h=s.contentId,f.contentId=h,y=this.apiRegistry.getPath({querystring:{},pathVars:f},"getUserPlaybackConsent"),r=y,n=d,e.next=12,H.post(y,{headers:d,data:i});case 12:return g=e.sent,e.abrupt("return",{success:!0,message:(0,w.default)(g,"message")});case 16:return e.prev=16,e.t0=e.catch(1),(m=(0,A.default)(e.t0,r,{originalHeaders:n},"UPC")).apiCode=k.PLAYBACK_CONSENT_API,e.abrupt("return",I.default.reject(m));case 21:case"end":return e.stop()}}),e,this,[[1,16]])})));return e}()},{key:"getUserPlaybackConsent",value:function(e){return e.v3RTInterceptor(this._getUserPlaybackConsent.bind(this),e).catch(u())}},{key:"verifyAndReturnPlaybackUrl",value:function(e){e.device instanceof Object&&(e.deviceId=e.device.deviceId);var t={deviceIdPath:"device.deviceId",userIdPath:"userId"};try{var r=e.personaData?Y.getWatchPercentage(e):I.default.resolve(0),n=(0,p.default)({},t,{invalidErrorCode:k.PLAYBACK_COMPOSITE_ERROR_TYPE.JWT_TOKEN_EXPIRED}),a="v2"!==e.apiVersion?this.getCompositePlaybackUrl(e,n):this.getCompositePlaybackUrlV2(e,n);return G.combineCalls([a,r]).catch((function(e){var t=e.findIndex((function(e){return void 0!==e})),r=e[t];return r.errorList=e,r.apiCode=[k.PLAYBACK_COMPOSITE_API_IDS.PLAYBACK_COMPOSITE,k.PLAYBACK_COMPOSITE_API_IDS.WATCH_PERCENTAGE,k.PLAYBACK_COMPOSITE_API_IDS.GEO_RIGHTS,k.PLAYBACK_COMPOSITE_API_IDS.CONCURRENCY][t],I.default.reject(r)})).then((function(e){var t=(0,d.default)(e,2),r=t[0];return r.watchPercentage=t[1]||0,r}))}catch(e){return I.default.reject(e)}}}]),t}(S.default),a(c.prototype,"_checkConcurrency",[o],(0,l.default)(c.prototype,"_checkConcurrency"),c.prototype),a(c.prototype,"getCompositePlaybackUrlV2",[i],(0,l.default)(c.prototype,"getCompositePlaybackUrlV2"),c.prototype),a(c.prototype,"getCompositePlaybackUrl",[s],(0,l.default)(c.prototype,"getCompositePlaybackUrl"),c.prototype),c)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(6)),u=n(r(3)),o=n(r(1)),i=n(r(2)),s=n(r(4)),c=n(r(5)),l=r(16),d=r(0),f=n(r(247)),p=n(r(57)),v=new d.HttpStatusMessages(f.default),h=d.utils.baseUtils;t.default=function(e){function t(){var e,r,n,i;(0,o.default)(this,t);for(var c=arguments.length,d=Array(c),f=0;c>f;f++)d[f]=arguments[f];return r=n=(0,s.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(d))),n.checkConcurrencyResponse=function(e){var t=e.errorDetails,r=void 0===t?{}:t,u=r.errorCode,o=void 0===u?"":u,i=r.appCode,s=void 0===i?"":i,c=r.httpStatus,d=r.metadata,f=void 0===d?{}:d,p=r.message,y=l.SLATE_ACTION_TYPE.CONCURRENCY,g=h.getNewObjectCopy(l.defaultIsAllowPlayBackResponse),m=n.isConcurrentStreamPlaying(e),_=v.getMessage("checkConcurrency",c);return(0,a.default)({},g,{canWatch:m?"N":"Y",message:_,appCode:s,metadata:f,errorCode:o,actionCode:y,httpStatus:c,apiErrorMessage:p,errorDetails:r,respData:f})},i=r,(0,s.default)(n,i)}return(0,c.default)(t,e),(0,i.default)(t,[{key:"isConcurrentStreamPlaying",value:function(e){var t=e.httpStatus;return 401===t||403===t||429===t}}]),t}(p.default)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={checkConcurrency:{407:{webMsg:"Sorry, more than one premium video is being requested from this account. Please close other videos and try again."},429:{webMsg:"Oops, something went wrong. Please try again in sometime. For help, write to help@hotstar.com."},401:{webMsg:"Oops, something went wrong. Please login again and retry."}},checkAggreGatedContentRights:{DEFAULT:{webMsg:"You need a Premium Membership to watch this video."},404:{webMsg:"Uh-oh, this content is not available!"},412:{webMsg:"Requested content is invalid."},402:{webMsg:"Subscription pack is not purchased."}}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(r(11)),u=n(r(3)),o=n(r(1)),i=n(r(4)),s=n(r(5)),c=n(r(249)),l=n(r(18));t.default=new(function(e){function t(){(0,o.default)(this,t);var e=(0,i.default)(this,(t.__proto__||(0,u.default)(t)).call(this));return e.apiConfigs=[].concat((0,a.default)(c.default),(0,a.default)(e.apiConfigs||[])),e._defaultOptions={apiVersion:"v2"},e}return(0,s.default)(t,e),t}(l.default))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(0));t.default=[{endPoint:n.default.constants.UMS_CONCURRENCY_PLATFORM,apis:{checkConcurrency:{route:"/{apiVersion}/{platform}/{countryCode}/entitlement/device/{deviceId}/{userId}/"}}},{endPoint:n.default.constants.UMS_COMPOSITE_PLAYBACK,apis:{getCompositePlaybackUrl:{route:"/{apiVersion}/playback/content/{contentId}"},getUserPlaybackConsent:{route:"/v1/consent/content/{contentId}"}}}]},function(e,t,r){function n(e,t,r){var n=null==e?void 0:a(e,t);return void 0===n?r:n}var a=r(251);e.exports=n},function(e,t,r){function n(e,t){for(var r=0,n=(t=a(t,e)).length;null!=e&&n>r;)e=e[u(t[r++])];return r&&r==n?e:void 0}var a=r(252),u=r(258);e.exports=n},function(e,t,r){function n(e,t){return a(e)?e:u(e,t)?[e]:o(i(e))}var a=r(91),u=r(253),o=r(255),i=r(257);e.exports=n},function(e,t,r){function n(e,t){if(a(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!u(e))||i.test(e)||!o.test(e)||null!=t&&e in Object(t)}var a=r(91),u=r(254),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;e.exports=n},function(e,t){function r(){return!1}e.exports=r},function(e,t,r){var n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g;e.exports=r(256)((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(n,(function(e,r,n,u){t.push(n?u.replace(a,"$1"):r||e)})),t}))},function(e,t){function r(e){return e}e.exports=r},function(e,t){function r(e){return e}e.exports=r},function(e,t){function r(e){return e}e.exports=r},function(e,t,r){"use strict";function n(e){return e?"_"+e:""}function a(e,t){var r=void 0;switch(e){case c.HTTP_STATUS.NETWORK_UNAVAILABLE:r=l.NETWORK_ERRORS.NETWORK_UNAVAILABLE;break;case c.HTTP_STATUS.NETWORK_TIMEOUT:r=l.NETWORK_ERRORS.NETWORK_TIMEOUT;break;default:r=e}return"ERR"+n(t)+n(r)}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],r=e.httpStatus;return e.code=e.code||e.errorCode||e.appCode||a(r,t),e}function o(e){for(var t in d)if(!Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3];if(o(e))return e;var a=r.originalHeaders,i=void 0===a?{}:a,c=r.originalParams,l=void 0===c?{}:c,f=u(e,n),p=(0,s.default)({},d,{originalReq:t,request:{url:t,headers:i,params:l},errorDetails:f,httpStatus:e.httpStatus,errorCode:f.code});return t&&(p.originalReq=t),p}Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){return e&&e.__esModule?e:{default:e}}(r(20)),c=r(60),l=r(16),d={success:!1,httpStatus:c.HTTP_STATUS.NETWORK_UNAVAILABLE,errorDetails:{}};t.default=i},function(e,t,r){"use strict";function n(e,t){var r=e.clientCapabilities,n=void 0===r?{}:r,o=e.device,i=void 0===o?{}:o,s=e.tags,c=void 0===s?{}:s,l=e.userId,d=e.content,f=e.fingerPrint,p=e.requestId,v=e.resolution,h=e.apiVersion,y={},g=(0,a.default)({},t),m={},_={},b=d.contentId;return y.os_name=encodeURIComponent(i.osName),y.os_version=i.osVersion,y.app_name=i.client,y.app_version=i.clientVersion,y.platform=i.platform,y.platform_version=i.platformVersion,y.client_capabilities={ads:n.ads,audio_channel:n.audio_channel,dvr:n.dvr,package:n.package,dynamic_range:n.dynamic_range||n.dynamicRange,video_codec:n.video_codec,encryption:n.encryption,ladder:n.ladder,container:n.containers,resolution:n.resolution},y.device_model=i.deviceModel,y.device_manufacturer=i.deviceManufacturer,y.language=c.language,y.drm_parameters={widevine_security_level:n.widevine_security_level,hdcp_version:n.widevine_hdcp_version},"v4"===h&&(y.resolution=v),g["X-HS-UserToken"]=l,g["X-HS-Request-Id"]=p,m["device-id"]=encodeURIComponent(i.deviceId),m["desired-config"]=(0,u.generateTagsString)(c,"|"),_.contentId=b,_.apiVersion=h,f&&(g["X-HS-Tkey"]=f),{body:y,headers:g,queryParams:m,pathVars:_}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(r(6));t.default=n;var u=r(59)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(262));t.default=(0,r(0).registerOperations)("BIFROST",n.default)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(r(7)),u=n(r(8)),o=n(r(10)),i=n(r(1)),s=n(r(2)),c=n(r(263)),l=n(r(0)).default.HttpLib;t.default=function(){function e(){(0,i.default)(this,e)}return(0,s.default)(e,[{key:"concurrencyHeartbeat",value:function(){function e(){return t.apply(this,arguments)}var t=(0,o.default)(a.default.mark((function e(){var t,r,n,o,i,s,d,f,p,v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,r=v.data,n=void 0===r?{}:r,o=v.config,s=(i=void 0===o?{}:o).basePath,d=c.default.getPath({},"heartbeat",s),f={"Hs-Client-Timestamp":Date.now(),"Schema-Name":i.schemaName||"heartbeat","Schema-Version":i.schemaVersion||"1",Authorization:"Basic "+i.token},p={data:n,headers:f},e.next=9,l.post(d,p);case 9:(t=e.sent).error=!1,e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(1),console.warn("Error::concurrencyHeartbeat::",e.t0),e.abrupt("return",u.default.resolve({error:!0,requestData:v.data}));case 17:return e.abrupt("return",t);case 18:case"end":return e.stop()}}),e,this,[[1,13]])})));return e}()}]),e}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(r(11)),u=n(r(3)),o=n(r(1)),i=n(r(4)),s=n(r(5)),c=n(r(264)),l=n(r(18));t.default=new(function(e){function t(){(0,o.default)(this,t);var e=(0,i.default)(this,(t.__proto__||(0,u.default)(t)).call(this));return e.apiConfigs=[].concat((0,a.default)(c.default),(0,a.default)(e.apiConfigs||[])),e._defaultOptions={apiVersion:"v1"},e}return(0,s.default)(t,e),t}(l.default))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.default=[{endPoint:function(e){return e&&e.__esModule?e:{default:e}}(n).default.constants.BIFROST,apis:{heartbeat:{route:"/{apiVersion}/events/heartbeat"}}}]}],[199]))}}]);